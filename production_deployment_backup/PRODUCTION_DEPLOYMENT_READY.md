# üöÄ Production Deployment Ready - LMS Backend –Ω–∞ Railway

**–î–∞—Ç–∞:** 13 —è–Ω–≤–∞—Ä—è 2025  
**Sprint:** 42  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –ö –î–ï–ü–õ–û–Æ

## üìã –ß—Ç–æ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–æ –¥–ª—è –¥–µ–ø–ª–æ—è

### 1. ‚úÖ Railway –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- **railway.json** - –æ—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- **nixpacks.toml** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–±–æ—Ä–∫–∏ —Å PHP 8.2
- **Procfile** - –∫–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
- –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è PHP

### 2. ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

- PostgreSQL –º–∏–≥—Ä–∞—Ü–∏–∏ –≥–æ—Ç–æ–≤—ã
- –°–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏: `database/init-production.sql`
- Production seeder: `database/seeders/ProductionSeeder.php`
- –¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:
  - admin@lms.company.ru / Admin123!
  - student@lms.company.ru / Student123!

### 3. ‚úÖ API Endpoints

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –æ—Å–Ω–æ–≤–Ω—ã–µ endpoints:
- `POST /api/v1/auth/login` - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- `POST /api/v1/auth/logout` - –≤—ã—Ö–æ–¥
- `POST /api/v1/auth/refresh` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
- `GET /api/v1/auth/me` - —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- `GET /api/v1/auth/health` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

### 4. ‚úÖ iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–æ

- **AppConfig.swift** - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å production URL
- **APIClient.swift** - –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —Å–µ—Ç–µ–≤–æ–π —Å–ª–æ–π
- **KeychainHelper.swift** - –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
- **AuthService.swift** - —Ä–∞–±–æ—Ç–∞ —Å —Ä–µ–∞–ª—å–Ω—ã–º API
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ mock/production —Ä–µ–∂–∏–º–æ–≤

### 5. ‚úÖ CI/CD

- GitHub Actions workflow: `.github/workflows/railway-deploy.yml`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –ø—Ä–∏ push –≤ main/production
- –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

## üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Railway

1. –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ [railway.app](https://railway.app)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
3. –î–æ–±–∞–≤—å—Ç–µ PostgreSQL service
4. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

### –®–∞–≥ 2: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í Railway –¥–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```env
APP_NAME=LMS Corporate University
APP_ENV=production
APP_DEBUG=false
APP_KEY=base64:YOUR_KEY_HERE
APP_URL=https://${{RAILWAY_PUBLIC_DOMAIN}}

JWT_SECRET=YOUR_SECRET_HERE
JWT_ALGO=HS256
JWT_TTL=60

CORS_ALLOWED_ORIGINS=*
CACHE_DRIVER=database
SESSION_DRIVER=database
```

### –®–∞–≥ 3: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–π

```bash
# –õ–æ–∫–∞–ª—å–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ APP_KEY
php artisan key:generate --show

# –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ JWT_SECRET
openssl rand -base64 32
```

### –®–∞–≥ 4: –ü–µ—Ä–≤—ã–π –¥–µ–ø–ª–æ–π

1. Push –∫–æ–¥ –≤ GitHub:
   ```bash
   git add .
   git commit -m "feat: Production deployment ready"
   git push origin main
   ```

2. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–Ω–µ—Ç –¥–µ–ø–ª–æ–π

3. –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –∑–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Railway CLI:
   ```bash
   railway run php artisan migrate --force
   railway run php artisan db:seed --class=ProductionSeeder --force
   ```

### –®–∞–≥ 5: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1. –ó–∞–º–µ–Ω–∏—Ç–µ URL –≤ `AppConfig.swift`:
   ```swift
   return "https://YOUR-APP.up.railway.app/api/v1"
   ```

2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π TestFlight build
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º API

## üìä –°—Ç–∞—Ç—É—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|-----------|---------|------------|
| Backend PHP | ‚úÖ Ready | Symfony/Laravel |
| PostgreSQL | ‚úÖ Ready | Railway service |
| Auth API | ‚úÖ Ready | JWT tokens |
| iOS App | ‚úÖ Ready | API client –≥–æ—Ç–æ–≤ |
| CI/CD | ‚úÖ Ready | GitHub Actions |
| –ú–∏–≥—Ä–∞—Ü–∏–∏ | ‚úÖ Ready | 19 —Ç–∞–±–ª–∏—Ü |
| Seeders | ‚úÖ Ready | –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ |

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ HTTPS –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç Railway
- ‚úÖ JWT —Ç–æ–∫–µ–Ω—ã –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚úÖ Keychain –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤ –≤ iOS
- ‚úÖ CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ –ü–∞—Ä–æ–ª–∏ —Ö–µ—à–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ bcrypt

## üìà –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API**:
   ```bash
   curl https://YOUR-APP.up.railway.app/api/v1/auth/health
   ```

2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**:
   - –í–∫–ª—é—á–∏—Ç–µ Railway metrics
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ alerts
   - –î–æ–±–∞–≤—å—Ç–µ Sentry –¥–ª—è –æ—à–∏–±–æ–∫

3. **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**:
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ auto-scaling –≤ Railway
   - –î–æ–±–∞–≤—å—Ç–µ Redis –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ CDN –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ:
- ‚úÖ –†–∞–±–æ—Ç–∞—é—â–∏–π backend –Ω–∞ Railway
- ‚úÖ PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ API –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚úÖ iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω–æ–µ –∫ production
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏

---

**–ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é!** üöÄ

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –≤ Issues —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è. 