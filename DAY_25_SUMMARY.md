# –î–µ–Ω—å 25: Sprint 4 - –î–µ–Ω—å 2 - Domain Entities –∏ Repository Interfaces

## üìÖ –î–∞—Ç–∞: 05.02.2025

## üìã –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. PositionProfile Entity ‚úÖ
- –°–æ–∑–¥–∞–Ω–∞ entity –¥–ª—è –ø—Ä–æ—Ñ–∏–ª—è –¥–æ–ª–∂–Ω–æ—Å—Ç–∏
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç—è–º–∏ –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏ –∏ –∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã–º–∏ –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏—è–º–∏  
- –ú–µ—Ç–æ–¥—ã: addRequiredCompetency, addDesiredCompetency, removeCompetency
- **10 —Ç–µ—Å—Ç–æ–≤ –Ω–∞–ø–∏—Å–∞–Ω—ã –∏ –ø—Ä–æ—Ö–æ–¥—è—Ç**

### 2. RequiredCompetency Value Object ‚úÖ
- –•—Ä–∞–Ω–µ–Ω–∏–µ CompetencyId –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è
- –†–∞–∑–ª–∏—á–∏–µ –º–µ–∂–¥—É required –∏ desired –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏—è–º–∏
- –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–±—Ä–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã
- –ú–µ—Ç–æ–¥—ã —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
- **8 —Ç–µ—Å—Ç–æ–≤ –Ω–∞–ø–∏—Å–∞–Ω—ã –∏ –ø—Ä–æ—Ö–æ–¥—è—Ç**

### 3. CareerPath Entity ‚úÖ
- –°–æ–∑–¥–∞–Ω–∞ entity –¥–ª—è –∫–∞—Ä—å–µ—Ä–Ω—ã—Ö –ø—É—Ç–µ–π
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ milestone'–∞–º–∏
- –ú–µ—Ç–æ–¥—ã –∞–∫—Ç–∏–≤–∞—Ü–∏–∏/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **10 —Ç–µ—Å—Ç–æ–≤ –Ω–∞–ø–∏—Å–∞–Ω—ã –∏ –ø—Ä–æ—Ö–æ–¥—è—Ç**

### 4. Repository Interfaces ‚úÖ
- PositionRepositoryInterface
- PositionProfileRepositoryInterface  
- CareerPathRepositoryInterface
- **3 —Ç–µ—Å—Ç–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤**

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–Ω—è

### –¢–µ—Å—Ç—ã:
- **–ù–∞–ø–∏—Å–∞–Ω–æ —Å–µ–≥–æ–¥–Ω—è**: 31 —Ç–µ—Å—Ç
- **–í—Å–µ–≥–æ –≤ Sprint 4**: 41 —Ç–µ—Å—Ç
- **–í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç**: –î–ê ‚úÖ
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: ~35ms

### –ö–æ–¥:
- **–°–æ–∑–¥–∞–Ω–æ —Ñ–∞–π–ª–æ–≤**: 7
- **–û–±—â–∏–π –æ–±—ä–µ–º**: ~650 —Å—Ç—Ä–æ–∫

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞:
```
src/Position/
‚îú‚îÄ‚îÄ Domain/
‚îÇ   ‚îú‚îÄ‚îÄ Position.php ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ PositionProfile.php ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ CareerPath.php ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ Events/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PositionCreated.php ‚úÖ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PositionUpdated.php ‚úÖ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ PositionArchived.php ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ Repository/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PositionRepositoryInterface.php ‚úÖ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PositionProfileRepositoryInterface.php ‚úÖ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CareerPathRepositoryInterface.php ‚úÖ
‚îÇ   ‚îî‚îÄ‚îÄ ValueObjects/
‚îÇ       ‚îú‚îÄ‚îÄ PositionId.php ‚úÖ
‚îÇ       ‚îú‚îÄ‚îÄ PositionCode.php ‚úÖ
‚îÇ       ‚îú‚îÄ‚îÄ PositionLevel.php ‚úÖ
‚îÇ       ‚îú‚îÄ‚îÄ Department.php ‚úÖ
‚îÇ       ‚îî‚îÄ‚îÄ RequiredCompetency.php ‚úÖ
tests/Unit/Position/
‚îî‚îÄ‚îÄ Domain/
    ‚îú‚îÄ‚îÄ PositionTest.php ‚úÖ
    ‚îú‚îÄ‚îÄ PositionProfileTest.php ‚úÖ
    ‚îú‚îÄ‚îÄ CareerPathTest.php ‚úÖ
    ‚îú‚îÄ‚îÄ Repository/
    ‚îÇ   ‚îî‚îÄ‚îÄ PositionRepositoryInterfaceTest.php ‚úÖ
    ‚îî‚îÄ‚îÄ ValueObjects/
        ‚îî‚îÄ‚îÄ RequiredCompetencyTest.php ‚úÖ
```

## üéØ –ü—Ä–æ–≥—Ä–µ—Å—Å Sprint 4

```
Domain Layer:        [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà----] 60% (–∑–∞–≤–µ—Ä—à–µ–Ω–æ)
Application Layer:   [----------] 0%
Infrastructure:      [----------] 0%
Documentation:       [----------] 0%

–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å:      [‚ñà‚ñà‚ñà-------] 33% (2/9 –¥–Ω–µ–π)
```

## ‚úÖ TDD –ø—Ä–∞–∫—Ç–∏–∫–∏

1. **RED-GREEN-REFACTOR —Ü–∏–∫–ª**:
   - –ö–∞–∂–¥—ã–π —Ç–µ—Å—Ç –Ω–∞–ø–∏—Å–∞–Ω –ø–µ—Ä–≤—ã–º
   - –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è
   - –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

2. **–ë—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å**:
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω `test-quick.sh`
   - –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞: 20-35ms
   - –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫ –ø–æ—Å–ª–µ –Ω–∞–ø–∏—Å–∞–Ω–∏—è

3. **–ü–æ–∫—Ä—ã—Ç–∏–µ**:
   - PositionProfile: 100% –º–µ—Ç–æ–¥–æ–≤
   - CareerPath: 100% –º–µ—Ç–æ–¥–æ–≤
   - RequiredCompetency: 100% –º–µ—Ç–æ–¥–æ–≤

## üîç –ö–ª—é—á–µ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è

1. **RequiredCompetency –∫–∞–∫ Value Object**:
   - Immutable
   - –†–∞–∑–ª–∏—á–∏–µ required/desired —á–µ—Ä–µ–∑ —Ñ–ª–∞–≥
   - –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–±—Ä–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã

2. **CareerPath milestones**:
   - –ü—Ä–æ—Å—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (array)
   - –ê–≤—Ç–æ—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ—Ç–∏–≤ estimatedDuration

3. **Repository –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã**:
   - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –º–µ—Ç–æ–¥–æ–≤
   - –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
   - –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

## üìù –£—Ä–æ–∫–∏ –¥–Ω—è

1. **ReflectionInterface –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ReflectionClass –¥–ª—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
2. **–°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ edit_file** –∏–Ω–æ–≥–¥–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å cat
3. **CompetencyLevel** –Ω–µ –∏–º–µ–µ—Ç –º–µ—Ç–æ–¥–∞ senior() - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å advanced()

## üöÄ –ü–ª–∞–Ω –Ω–∞ –∑–∞–≤—Ç—Ä–∞ (–î–µ–Ω—å 3)

1. **Domain Services**:
   - PositionHierarchyService
   - CareerProgressionService
   - PositionCompetencyService

2. **Application Layer –Ω–∞—á–∞–ª–æ**:
   - PositionService
   - PositionDTO
   - Command handlers

3. **–¶–µ–ª–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏**:
   - 25+ —Ç–µ—Å—Ç–æ–≤
   - Domain Layer: 100%
   - Application Layer: 30%

## üí° –í—ã–≤–æ–¥—ã

–î–µ–Ω—å 2 Sprint 4 –ø—Ä–æ—à–µ–ª –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ. Domain —Å–ª–æ–π –±–ª–∏–∑–æ–∫ –∫ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—é - —Å–æ–∑–¥–∞–Ω—ã –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤. TDD –ø—Ä–∞–∫—Ç–∏–∫–∏ —Å–æ–±–ª—é–¥–∞—é—Ç—Å—è —Å—Ç—Ä–æ–≥–æ, –≤—Å–µ —Ç–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã –ø–µ—Ä–≤—ã–º–∏ –∏ –ø—Ä–æ—Ö–æ–¥—è—Ç. –ó–∞–≤—Ç—Ä–∞ –Ω–∞—á–∏–Ω–∞–µ–º Application —Å–ª–æ–π. 