# üöÄ TestFlight Automation Guide

## –û–±–∑–æ—Ä

–≠—Ç–∞ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —Å–∏–º—É–ª—è—Ç–æ—Ä–µ
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞—Ç—å 2 –±–∏–ª–¥–∞ –≤ –¥–µ–Ω—å –Ω–∞ TestFlight
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∑–∞–≥—Ä—É–∑–æ–∫ –∏ —Å–æ–±–ª—é–¥–∞—Ç—å –ª–∏–º–∏—Ç—ã Apple
- ‚úÖ –ü–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ –∑–∞–≥—Ä—É–∑–æ–∫

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º–∏:
```bash
chmod +x *.sh
```

### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é:
```bash
./setup-auto-upload.sh
```

### 3. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:
```bash
brew install terminal-notifier
```

## üì± –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —Å–∏–º—É–ª—è—Ç–æ—Ä–µ:

```bash
./local-test.sh
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
- –°–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Å–∏–º—É–ª—è—Ç–æ—Ä–∞
- –ó–∞–ø—É—Å–∫–∞–µ—Ç iPhone 16 Pro —Å–∏–º—É–ª—è—Ç–æ—Ä
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å UI —Ç–µ—Å—Ç—ã

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã —Å–∏–º—É–ª—è—Ç–æ—Ä–∞:
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
xcrun simctl launch booted ru.tsum.lms.igor

# –°–¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç
xcrun simctl io booted screenshot screenshot.png

# –ó–∞–ø–∏—Å–∞—Ç—å –≤–∏–¥–µ–æ
xcrun simctl io booted recordVideo demo.mov
# –ù–∞–∂–º–∏—Ç–µ Ctrl+C —á—Ç–æ–±—ã –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å

# –£–¥–∞–ª–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
xcrun simctl uninstall booted ru.tsum.lms.igor
```

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ TestFlight

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:
```bash
./auto-testflight.sh check
```

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫:
```bash
# –£—Ç—Ä–µ–Ω–Ω—è—è –∑–∞–≥—Ä—É–∑–∫–∞
./auto-testflight.sh morning

# –ü–æ—Å–ª–µ–æ–±–µ–¥–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞  
./auto-testflight.sh afternoon
```

### –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ (–Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏):
- **09:00** - –£—Ç—Ä–µ–Ω–Ω—è—è —Å–±–æ—Ä–∫–∞
- **15:00** - –ü–æ—Å–ª–µ–æ–±–µ–¥–µ–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:
```bash
tail -f ~/lms_uploads.log
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è cron:
```bash
crontab -l
```

### –ò—Å—Ç–æ—Ä–∏—è –∑–∞–≥—Ä—É–∑–æ–∫:
```bash
cat ~/.lms_testflight_uploads.log
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

### –õ–∏–º–∏—Ç—ã Apple:
- ‚ùó **–ú–∞–∫—Å–∏–º—É–º 2 –∑–∞–≥—Ä—É–∑–∫–∏ –≤ –¥–µ–Ω—å** –Ω–∞ –æ–¥–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- –õ–∏–º–∏—Ç —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ 24 —á–∞—Å–∞ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
- –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏ —Å–æ–±–ª—é–¥–∞–µ—Ç –ª–∏–º–∏—Ç—ã

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- Xcode –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω —Å –≤–∞—à–∏–º Apple ID
- –ö–æ–º–ø—å—é—Ç–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω –≤–æ –≤—Ä–µ–º—è –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–≥—Ä—É–∑–æ–∫
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –ø–æ–¥–ø–∏—Å—å –≤ Xcode

### –ï—Å–ª–∏ –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–µ —É–¥–∞–ª–∞—Å—å:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `tail -50 ~/lms_uploads.log`
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Xcode –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã: `security find-identity -v -p codesigning`
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ Xcode Organizer

## üÜò –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### "Upload limit reached":
–ü–æ–¥–æ–∂–¥–∏—Ç–µ 24 —á–∞—Å–∞ —Å –º–æ–º–µ–Ω—Ç–∞ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞ –¥–µ–Ω—å.

### "No Accounts" –æ—à–∏–±–∫–∞:
1. –û—Ç–∫—Ä–æ–π—Ç–µ Xcode
2. Settings ‚Üí Accounts
3. –î–æ–±–∞–≤—å—Ç–µ Apple ID

### "Certificate revoked":
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `build-testflight-nosign.sh` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–µ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–≥–æ –∞—Ä—Ö–∏–≤–∞, –∑–∞—Ç–µ–º –ø–æ–¥–ø–∏—à–∏—Ç–µ –≤ Xcode.

### –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏:
```bash
# –£–¥–∞–ª–∏—Ç—å –≤—Å–µ cron –∑–∞–¥–∞—á–∏
crontab -r

# –ò–ª–∏ —É–¥–∞–ª–∏—Ç—å —Ç–æ–ª—å–∫–æ LMS –∑–∞–¥–∞—á–∏
crontab -l | grep -v "auto-testflight.sh" | crontab -
```

## üìà –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ** –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π –Ω–∞ TestFlight
2. **–ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ 2 –∑–∞–≥—Ä—É–∑–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ
3. **–°–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏** - –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –≤–∞–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
4. **–ü–ª–∞–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ª–∏–∑—ã** - —É—Ç—Ä–µ–Ω–Ω–∏–π –±–∏–ª–¥ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –ø–æ—Å–ª–µ–æ–±–µ–¥–µ–Ω–Ω—ã–π –¥–ª—è —Ñ–∏–∫—Å–∞ –±–∞–≥–æ–≤

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –õ–æ–≥–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ –¥–æ–º–∞—à–Ω–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Ñ–∞–π–ª—ã —Å –ø–∞—Ä–æ–ª—è–º–∏ –∏–ª–∏ –∫–ª—é—á–∞–º–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Keychain –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è credentials 