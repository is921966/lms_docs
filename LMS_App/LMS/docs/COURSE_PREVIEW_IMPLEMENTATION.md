# Реализация предпросмотра курса (Course Preview)

## Обзор

Реализована функциональность предпросмотра курса, позволяющая администраторам и инструкторам увидеть, как курс будет выглядеть для студентов перед публикацией.

## Проблема

В управлении курсами была кнопка "Предпросмотр курса", но функциональность не была реализована (TODO комментарий).

## Решение

### 1. CoursePreviewView
**Файл**: `Views/CoursePreviewView.swift`

Создан полноценный экран предпросмотра курса со следующими секциями:

#### Основные компоненты:
- **Header Section** - Название курса, тип (Cmi5/обычный), автор
- **Course Info Section** - Длительность, количество модулей, уровень сложности
- **Description Section** - Описание курса
- **Learning Objectives** - Что изучат студенты
- **Course Content** - Список модулей с деталями
- **Competencies Section** - Развиваемые компетенции
- **Enroll Button** - Кнопка записи (отключена в preview)

### 2. ModulePreviewView
Модальное окно для просмотра информации о модуле:
- Иконка типа контента
- Название и описание модуля
- Длительность
- Тип контента (видео, документ, тест, интерактив)

### 3. Интеграция в ManagedCourseDetailView
```swift
@State private var showingPreview = false

// В кнопке
Button {
    showingPreview = true
} label: {
    Label("Предпросмотр курса", systemImage: "eye")
}

// Sheet для отображения
.sheet(isPresented: $showingPreview) {
    if let course = viewModel.course {
        CoursePreviewView(course: course)
    }
}
```

## UI/UX особенности

### Визуальные индикаторы
- Бейдж "Интерактивный курс" для Cmi5 курсов
- Иконки для типов контента модулей
- Цветовое кодирование компетенций
- Нумерация модулей

### Интерактивность
- Клик по модулю открывает детальную информацию
- Кнопка записи отключена с пояснением
- Навигация через toolbar

### Адаптивность
- ScrollView для длинного контента
- FlowLayout для компетенций
- Правильные отступы и группировка

## Технические детали

### Переиспользование компонентов
- Создан `CompetencyFlowLayout` вместо `FlowLayout` (избежание конфликта имен)
- `CourseCompetencyChip` вместо `CompetencyChip` (уже существует в TestDetailView)

### Вычисляемые свойства
```swift
private func calculateTotalMinutes() -> Int {
    course.modules.reduce(0) { $0 + $1.duration }
}
```

### Placeholder данные
- Цели обучения генерируются автоматически
- Названия компетенций пока заглушки (в реальном приложении - загрузка по ID)

## Результат

Теперь инструкторы могут:
1. Увидеть курс глазами студента
2. Проверить структуру и содержание
3. Убедиться в правильности оформления
4. Просмотреть информацию о модулях

## Дальнейшие улучшения

1. **Загрузка реальных данных компетенций** - сейчас показываются заглушки
2. **Предпросмотр контента модулей** - показ реального видео/документов
3. **Мобильная адаптация** - оптимизация для iPad
4. **Экспорт в PDF** - возможность сохранить preview

---

**Sprint 47, День 152**  
**Статус**: ✅ Реализовано  
**BUILD**: SUCCEEDED 