# language: ru
Функция: Запись на курс
  Как сотрудник компании
  Я хочу записываться на курсы
  Чтобы получать новые знания и навыки

  Предыстория:
    Дано я авторизован в системе как "Сотрудник"
    И я нахожусь в каталоге курсов
    И у меня есть доступ к корпоративному обучению

  @happy_path @critical
  Сценарий: Успешная запись на доступный курс
    Дано существует курс "Основы iOS разработки" с 10 свободными местами
    И курс соответствует моей должности
    Когда я открываю карточку курса "Основы iOS разработки"
    И я нажимаю кнопку "Записаться на курс"
    Тогда я должен увидеть подтверждение "Вы успешно записаны на курс"
    И курс должен появиться в разделе "Мои курсы"
    И количество свободных мест должно уменьшиться на 1
    И я должен получить email подтверждение

  @negative
  Сценарий: Попытка записи на заполненный курс
    Дано существует курс "Продвинутый Swift" без свободных мест
    Когда я открываю карточку курса "Продвинутый Swift"
    Тогда кнопка "Записаться на курс" должна быть неактивна
    И я должен увидеть сообщение "Нет свободных мест"
    И должна быть доступна кнопка "Встать в лист ожидания"

  @prerequisites
  Сценарий: Запись на курс с предварительными требованиями
    Дано существует курс "SwiftUI Advanced" с предварительным требованием "Swift Basics"
    И я не прошел курс "Swift Basics"
    Когда я открываю карточку курса "SwiftUI Advanced"
    Тогда я должен увидеть предупреждение "Требуется завершить: Swift Basics"
    И кнопка "Записаться на курс" должна быть неактивна
    И должна быть ссылка на требуемый курс

  @approval
  Сценарий: Запись на курс требующий одобрения руководителя
    Дано существует курс "Leadership Program" требующий одобрения
    Когда я нажимаю кнопку "Записаться на курс"
    Тогда должна открыться форма заявки
    Когда я заполняю поле "Обоснование" текстом "Хочу развивать лидерские навыки"
    И я нажимаю кнопку "Отправить заявку"
    Тогда я должен увидеть сообщение "Заявка отправлена руководителю"
    И статус курса должен быть "Ожидает одобрения"
    И мой руководитель должен получить уведомление

  @cancellation
  Сценарий: Отмена записи на курс
    Дано я записан на курс "Основы iOS разработки"
    И до начала курса больше 24 часов
    Когда я открываю карточку курса
    И я нажимаю кнопку "Отменить запись"
    И подтверждаю действие в диалоге
    Тогда я должен увидеть сообщение "Запись отменена"
    И курс должен исчезнуть из раздела "Мои курсы"
    И количество свободных мест должно увеличиться на 1

  @schedule_conflict
  Структура сценария: Проверка конфликтов расписания
    Дано я записан на курс "<существующий_курс>" в "<время1>"
    И существует курс "<новый_курс>" в "<время2>"
    Когда я пытаюсь записаться на "<новый_курс>"
    Тогда я должен увидеть "<результат>"

    Примеры:
      | существующий_курс | время1           | новый_курс      | время2           | результат                          |
      | Swift Basics      | Пн 10:00-12:00  | UI/UX Design    | Пн 11:00-13:00  | Конфликт расписания               |
      | Swift Basics      | Пн 10:00-12:00  | Kotlin Basics   | Вт 10:00-12:00  | Успешная запись                   |
      | Swift Basics      | Пн 10:00-12:00  | SwiftUI         | Пн 14:00-16:00  | Успешная запись                   |

  @recommendations
  Сценарий: Получение рекомендаций при записи
    Дано я записан на курс "Swift Basics"
    Когда я успешно записываюсь на курс
    Тогда я должен увидеть блок "Рекомендуемые курсы"
    И в рекомендациях должны быть:
      | Название курса      | Причина рекомендации                |
      | SwiftUI Basics      | Логическое продолжение Swift        |
      | iOS Best Practices  | Дополняет базовые знания           |
      | Git для iOS         | Необходимо для командной работы     | 