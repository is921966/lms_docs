# language: ru
Функция: Прохождение тестов
  Как обучающийся сотрудник
  Я хочу проходить тесты по курсам
  Чтобы проверить свои знания и получить сертификат

  Предыстория:
    Дано я авторизован как "Студент"
    И я записан на курс "Основы iOS разработки"
    И я завершил все модули курса

  @smoke @critical
  Сценарий: Успешное прохождение теста с первой попытки
    Дано доступен итоговый тест с 10 вопросами
    И проходной балл составляет 80%
    И у меня есть 3 попытки
    Когда я нажимаю кнопку "Начать тест"
    И я отвечаю правильно на 9 из 10 вопросов
    И я нажимаю кнопку "Завершить тест"
    Тогда я должен увидеть результат "90% - Тест пройден успешно!"
    И должна отобразиться разбивка по темам
    И должна быть доступна кнопка "Получить сертификат"
    И мой прогресс по курсу должен стать 100%

  @retry
  Сценарий: Повторная попытка после неудачи
    Дано я провалил тест с результатом 60%
    И у меня осталось 2 попытки
    Когда я нажимаю кнопку "Пройти заново"
    Тогда должен появиться диалог "Вы уверены? У вас останется 1 попытка"
    Когда я подтверждаю действие
    Тогда тест должен начаться заново
    И вопросы должны быть перемешаны
    И таймер должен начать отсчет сначала

  @time_limit
  Сценарий: Автоматическое завершение по истечении времени
    Дано тест ограничен по времени 30 минутами
    И я ответил только на 5 из 10 вопросов
    Когда время истекает
    Тогда тест должен автоматически завершиться
    И должны засчитаться только отвеченные вопросы
    И я должен увидеть предупреждение "Время истекло"
    И результат должен быть рассчитан на основе 5 ответов

  @question_types
  Структура сценария: Различные типы вопросов
    Дано в тесте есть вопрос типа "<тип_вопроса>"
    Когда я открываю этот вопрос
    Тогда я должен увидеть "<интерфейс>"
    И инструкция должна быть "<инструкция>"

    Примеры:
      | тип_вопроса             | интерфейс                    | инструкция                          |
      | Одиночный выбор         | Радио-кнопки                | Выберите один правильный ответ      |
      | Множественный выбор     | Чекбоксы                    | Выберите все правильные ответы      |
      | Соответствие           | Перетаскивание              | Соедините элементы попарно          |
      | Порядок действий       | Сортируемый список          | Расставьте в правильном порядке     |
      | Ввод текста            | Текстовое поле              | Введите ответ                       |

  @navigation
  Сценарий: Навигация по вопросам теста
    Дано я прохожу тест из 20 вопросов
    И я нахожусь на вопросе 5
    Когда я нажимаю кнопку "Следующий"
    Тогда я должен перейти к вопросу 6
    Когда я нажимаю кнопку "Предыдущий"
    Тогда я должен вернуться к вопросу 5
    Когда я нажимаю на номер вопроса 15 в навигации
    Тогда я должен перейти сразу к вопросу 15
    И отвеченные вопросы должны быть помечены зеленым
    И пропущенные вопросы должны быть помечены оранжевым

  @bookmarks
  Сценарий: Отметка вопросов для повторного просмотра
    Дано я не уверен в ответе на вопрос 3
    Когда я нажимаю иконку "Отметить для просмотра"
    Тогда вопрос должен быть помечен флажком
    И в навигации он должен отображаться с флажком
    Когда я завершаю все вопросы
    Тогда должна появиться кнопка "Просмотреть отмеченные (1)"
    Когда я нажимаю эту кнопку
    Тогда я должен перейти к вопросу 3

  @partial_save
  Сценарий: Сохранение прогресса при прерывании
    Дано я ответил на 7 из 15 вопросов
    Когда приложение неожиданно закрывается
    И я снова открываю приложение
    И возвращаюсь к тесту
    Тогда должен появиться диалог "Продолжить незавершенный тест?"
    Когда я выбираю "Продолжить"
    Тогда я должен вернуться к вопросу 8
    И все мои предыдущие ответы должны быть сохранены
    И таймер должен продолжить с момента прерывания

  @detailed_results
  Сценарий: Просмотр детальных результатов
    Дано я завершил тест с результатом 75%
    Когда я нажимаю "Посмотреть детальный разбор"
    Тогда я должен увидеть для каждого вопроса:
      | Информация              | Пример                                    |
      | Текст вопроса          | Что такое optional в Swift?               |
      | Мой ответ              | Тип данных для nil                        |
      | Правильный ответ       | Тип, который может содержать значение или nil |
      | Объяснение             | Optional позволяет безопасно работать...   |
      | Ссылка на материал     | Глава 3.2 "Optionals"                     |
    И неправильные ответы должны быть выделены красным
    И правильные ответы должны быть выделены зеленым

  @certificate
  Сценарий: Получение сертификата после успешного прохождения
    Дано я успешно прошел тест с результатом 95%
    Когда я нажимаю "Получить сертификат"
    Тогда должен сгенерироваться PDF сертификат содержащий:
      | Поле                   | Значение                            |
      | ФИО                    | Иван Петров                         |
      | Название курса         | Основы iOS разработки               |
      | Дата прохождения       | 30.01.2025                         |
      | Результат              | 95%                                |
      | Уникальный ID          | CERT-2025-iOS-0001                 |
      | QR код для проверки    | [QR код]                           |
    И сертификат должен быть доступен в разделе "Мои достижения" 