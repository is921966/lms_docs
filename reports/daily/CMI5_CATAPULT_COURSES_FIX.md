# –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å Cmi5 CATAPULT –∫—É—Ä—Å–∞–º–∏

## –î–∞—Ç–∞: 15 –∏—é–ª—è 2025
## –°—Ç–∞—Ç—É—Å: ‚úÖ –†–ï–®–ï–ù–û

## –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫—É—Ä—Å–∞ "Introduction to Geology - Responsive Style" (–æ–¥–∏–Ω –∏–∑ –¥–µ–º–æ-–∫—É—Ä—Å–æ–≤ CATAPULT —Å —Å–∞–π—Ç–∞ [xAPI.com](https://xapi.com/cmi5/resources/)) –ø–æ—è–≤–ª—è–ª–∞—Å—å –æ—à–∏–±–∫–∞ "ID –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –Ω–µ —É–∫–∞–∑–∞–Ω".

## –ê–Ω–∞–ª–∏–∑
–ò–∑ –ª–æ–≥–æ–≤ –±—ã–ª–æ –≤–∏–¥–Ω–æ:
```
‚ùå [Cmi5ModulePreview] Activity not found in any package, showing simulation
```

–ü—Ä–æ–±–ª–µ–º–∞ –∑–∞–∫–ª—é—á–∞–ª–∞—Å—å –≤ —Ç–æ–º, —á—Ç–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏–∑ XML –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞ –ø–∞—Ä—Å–∏–ª–∏—Å—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –Ω–æ –Ω–µ –¥–æ–±–∞–≤–ª—è–ª–∏—Å—å –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–ª–æ–∫–æ–≤ –≤ `Cmi5Package`.

## –ü—Ä–∏—á–∏–Ω–∞
–í –º–µ—Ç–æ–¥–µ `buildResult()` –∫–ª–∞—Å—Å–∞ `Cmi5XMLParser` –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –Ω–∞ –∫–æ—Ä–Ω–µ–≤–æ–º —É—Ä–æ–≤–Ω–µ (–≤–Ω–µ –±–ª–æ–∫–æ–≤) –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏—Å—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ö—É—Ä—Å—ã CATAPULT —á–∞—Å—Ç–æ –∏–º–µ—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≥–¥–µ —ç–ª–µ–º–µ–Ω—Ç—ã `<au>` –Ω–∞—Ö–æ–¥—è—Ç—Å—è –ø—Ä—è–º–æ –≤ —ç–ª–µ–º–µ–Ω—Ç–µ `<course>`, –±–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –±–ª–æ–∫–æ–≤.

## –†–µ—à–µ–Ω–∏–µ

### –û–±–Ω–æ–≤–ª–µ–Ω Cmi5XMLParser.swift

–ú–µ—Ç–æ–¥ `buildResult()` —Ç–µ–ø–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –Ω–∞ –∫–æ—Ä–Ω–µ–≤–æ–º —É—Ä–æ–≤–Ω–µ:

```swift
// –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –±–ª–æ–∫–∏ –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏–∑ rootNodes
var blocks: [Cmi5Block] = []
var rootActivities: [Cmi5Activity] = []

for node in rootNodes {
    switch node {
    case .block(let block):
        blocks.append(convertToNewBlock(block))
    case .activity(let activity):
        rootActivities.append(activity)
    }
}

// –°–æ–∑–¥–∞–µ–º –∫–æ—Ä–Ω–µ–≤–æ–π –±–ª–æ–∫
let rootBlock: Cmi5Block?
if !blocks.isEmpty || !rootActivities.isEmpty {
    if let firstBlock = blocks.first {
        // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –±–ª–æ–∫ —Å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—è–º–∏ –∫–æ—Ä–Ω–µ–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è
        rootBlock = Cmi5Block(
            id: firstBlock.id,
            title: firstBlock.title,
            description: firstBlock.description,
            blocks: firstBlock.blocks + blocks.dropFirst(),
            activities: firstBlock.activities + rootActivities
        )
    } else {
        // –ï—Å–ª–∏ –±–ª–æ–∫–æ–≤ –Ω–µ—Ç, —Å–æ–∑–¥–∞–µ–º –∫–æ—Ä–Ω–µ–≤–æ–π –±–ª–æ–∫ —Å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—è–º–∏
        rootBlock = Cmi5Block(
            id: "root_block",
            title: [Cmi5LangString(lang: "ru", value: courseTitle.isEmpty ? manifestTitle : courseTitle)],
            description: courseDescription.isEmpty ? nil : [Cmi5LangString(lang: "ru", value: courseDescription)],
            blocks: [],
            activities: rootActivities
        )
    }
} else {
    rootBlock = nil
}
```

### –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í `Cmi5CourseConverter` –¥–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:

```swift
print("üîÑ [Cmi5CourseConverter] Converting package: \(package.title)")
print("   - Package ID: \(package.id)")
print("   - Has rootBlock: \(package.manifest.rootBlock != nil)")
print("   - Total activities collected: \(activities.count)")
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç

1. ‚úÖ –ö—É—Ä—Å—ã CATAPULT —Ç–µ–ø–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è —Å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—è–º–∏
2. ‚úÖ –ü—Ä–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ –∫—É—Ä—Å–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
3. ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ù–∞—á–∞—Ç—å –º–æ–¥—É–ª—å" –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
4. ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã Cmi5 –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤:
   - –° –±–ª–æ–∫–∞–º–∏ –∏ –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—è–º–∏
   - –° –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—è–º–∏ –Ω–∞ –∫–æ—Ä–Ω–µ–≤–æ–º —É—Ä–æ–≤–Ω–µ
   - –°–º–µ—à–∞–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–µ–ø–µ—Ä—å

1. **–ü–∞—Ä—Å–∏–Ω–≥ XML**: `Cmi5XMLParser` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã `<au>` –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∏—Ö —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è
2. **–°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã**: –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –Ω–∞ –∫–æ—Ä–Ω–µ–≤–æ–º —É—Ä–æ–≤–Ω–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –±–ª–æ–∫
3. **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ –∫—É—Ä—Å**: `Cmi5CourseConverter` —Å–æ–∑–¥–∞–µ—Ç –º–æ–¥—É–ª–∏ –∏–∑ –±–ª–æ–∫–æ–≤ —Å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—è–º–∏
4. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ**: `ModuleContentPreviews` –Ω–∞—Ö–æ–¥–∏—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ –∏—Ö ID –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –ø–∞–∫–µ—Ç–∞

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–†–µ—à–µ–Ω–∏–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å:
- ‚úÖ –ö—É—Ä—Å–∞–º–∏ CATAPULT –æ—Ç ADL
- ‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º–∏ Cmi5 –∫—É—Ä—Å–∞–º–∏
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –∫—É—Ä—Å–∞–º–∏ —Å —Ä–∞–∑–ª–∏—á–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π

## –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `LMS_App/LMS/LMS/Features/Cmi5/Services/Cmi5XMLParser.swift`
- `LMS_App/LMS/LMS/Features/Cmi5/Services/Cmi5CourseConverter.swift`

## –ü—Ä–æ–≤–µ—Ä–∫–∞
```bash
xcodebuild -scheme LMS -configuration Debug build
# BUILD SUCCEEDED ‚úÖ
``` 