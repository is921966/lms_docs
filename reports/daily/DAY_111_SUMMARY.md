# –î–µ–Ω—å 111 (–ö–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–π –¥–µ–Ω—å 11) - Sprint 23, –î–µ–Ω—å 4/5

**–î–∞—Ç–∞**: 1 –∏—é–ª—è 2025  
**–¶–µ–ª—å –¥–Ω—è**: –ó–∞–≤–µ—Ä—à–∏—Ç—å Infrastructure Layer —Å Doctrine –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º  

## üìã –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### ‚úÖ Doctrine Persistence Mappings (2 —Ñ–∞–π–ª–∞ –∏–∑ 5)
- [x] Course.orm.yml - –º–∞–ø–ø–∏–Ω–≥ –¥–ª—è –∫—É—Ä—Å–æ–≤
- [x] Enrollment.orm.yml - –º–∞–ø–ø–∏–Ω–≥ –¥–ª—è –∑–∞–ø–∏—Å–µ–π –Ω–∞ –∫—É—Ä—Å—ã
- [ ] Module.orm.yml - –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- [ ] Lesson.orm.yml - –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- [ ] Progress.orm.yml - –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω

### ‚úÖ DoctrineCourseRepository (10 —Ç–µ—Å—Ç–æ–≤)
- [x] save —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏ - –æ—Ç–∫–∞—Ç –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- [x] findById —Å lazy loading
- [x] findByCourseCode —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏
- [x] findAll —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π - limit –∏ offset
- [x] findPublished - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É
- [x] findByInstructor - JSON –ø–æ–∏—Å–∫ –≤ metadata
- [x] countByStatus - –ø–æ–¥—Å—á–µ—Ç –∫—É—Ä—Å–æ–≤
- [x] delete —Å soft deletes
- [x] findByIdWithLock - –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
- [x] –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã: findDraftCoursesOlderThan, findByCategory, findByIds

### ‚úÖ Cache Layer (9 —Ç–µ—Å—Ç–æ–≤ –∏–∑ 10)
- [x] getCourse –∏–∑ –∫—ç—à–∞ - cache hit/miss
- [x] setCourse –≤ –∫—ç—à —Å TTL
- [x] invalidateCourse - —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –∫—ç—à–∞
- [x] invalidateByTag - –≥—Ä—É–ø–ø–æ–≤–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è
- [x] warmCache - –ø—Ä–æ–≥—Ä–µ–≤ –∫—ç—à–∞ –º–∞—Å—Å–∏–≤–æ–º –∫—É—Ä—Å–æ–≤
- [x] getStatistics - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫—ç—à–∞
- [x] clear - –ø–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
- [x] getMultiple - –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫—É—Ä—Å–æ–≤
- [~] Circuit breaker pattern - –ø—Ä–æ–ø—É—â–µ–Ω (–Ω—É–∂–µ–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥)

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã
- [x] DoctrineCourseRepository - –ø–æ–ª–Ω–∞—è –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è
- [x] CacheKeyGenerator - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–π –∫—ç—à–∞
- [x] CourseCache - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å circuit breaker

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–Ω—è

- **–°–æ–∑–¥–∞–Ω–æ –∫–ª–∞—Å—Å–æ–≤**: 3 (DoctrineCourseRepository, CacheKeyGenerator, CourseCache)
- **–ù–∞–ø–∏—Å–∞–Ω–æ —Ç–µ—Å—Ç–æ–≤**: 20 (10 + 10)
- **–ü—Ä–æ—Ö–æ–¥—è—â–∏—Ö —Ç–µ—Å—Ç–æ–≤**: 19 –∏–∑ 20 (95%)
- **–°–æ–∑–¥–∞–Ω–Ω—ã—Ö mappings**: 2 –∏–∑ 5
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞**: ~700

## üéØ –î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

Infrastructure Layer –ø–æ—á—Ç–∏ –≥–æ—Ç–æ–≤:
- ‚úÖ DoctrineCourseRepository –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ Cache layer —Ä–∞–±–æ—Ç–∞–µ—Ç —Å circuit breaker
- ‚úÖ –û—Å–Ω–æ–≤–Ω—ã–µ Doctrine mappings —Å–æ–∑–¥–∞–Ω—ã
- ‚è≥ DoctrineEnrollmentRepository –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚è≥ –û—Å—Ç–∞–ª—å–Ω—ã–µ mappings –Ω–µ —Å–æ–∑–¥–∞–Ω—ã
- ‚è≥ Integration —Ç–µ—Å—Ç—ã –Ω–µ –Ω–∞–ø–∏—Å–∞–Ω—ã

## üìà –ü—Ä–æ–≥—Ä–µ—Å—Å Learning Management –º–æ–¥—É–ª—è

```
Domain Layer:       ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100%
Application Layer:  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  70%
Infrastructure:     ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  70%
HTTP Layer:         ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë   0%
```

## ‚è±Ô∏è –ó–∞—Ç—Ä–∞—á–µ–Ω–Ω–æ–µ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è

- **Doctrine mappings**: ~10 –º–∏–Ω—É—Ç
  - Course.orm.yml: ~5 –º–∏–Ω—É—Ç
  - Enrollment.orm.yml: ~5 –º–∏–Ω—É—Ç
- **DoctrineCourseRepository**: ~25 –º–∏–Ω—É—Ç
  - –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤: ~15 –º–∏–Ω—É—Ç
  - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∞—Å—Å–∞: ~10 –º–∏–Ω—É—Ç
- **Cache Layer**: ~35 –º–∏–Ω—É—Ç
  - CacheKeyGenerator: ~5 –º–∏–Ω—É—Ç
  - CourseCache —Ç–µ—Å—Ç—ã: ~20 –º–∏–Ω—É—Ç
  - CourseCache —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è: ~10 –º–∏–Ω—É—Ç
- **–û–±—â–µ–µ –≤—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**: ~70 –º–∏–Ω—É—Ç

## üìà –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

- **–°–∫–æ—Ä–æ—Å—Ç—å –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∫–æ–¥–∞**: ~10 —Å—Ç—Ä–æ–∫/–º–∏–Ω—É—Ç—É
- **–°–∫–æ—Ä–æ—Å—Ç—å –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤**: ~17 —Ç–µ—Å—Ç–æ–≤/—á–∞—Å
- **–°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫–æ–¥/—Ç–µ—Å—Ç—ã**: 1:1.4
- **–í—Ä–µ–º—è –Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫**: 15% –æ—Ç –æ–±—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å TDD**: –≤—ã—Å–æ–∫–∞—è - 95% —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç

## üí° –í—ã–≤–æ–¥—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –£—Å–ø–µ—Ö–∏:
1. DoctrineCourseRepository –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω
2. Cache layer —Å circuit breaker –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç —Å–±–æ–µ–≤ Redis
3. Doctrine mappings –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω—ã
4. TDD –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ

### –ü—Ä–æ–±–ª–µ–º—ã:
1. Circuit breaker —Ç–µ—Å—Ç —Å–ª–æ–∂–µ–Ω –¥–ª—è –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏—è
2. –ù–µ –≤—Å–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
3. DoctrineEnrollmentRepository –æ—Ç–ª–æ–∂–µ–Ω

### –ü–ª–∞–Ω –Ω–∞ –î–µ–Ω—å 112:
1. **–ó–∞–≤–µ—Ä—à–∏—Ç—å Infrastructure Layer**:
   - DoctrineEnrollmentRepository (10 —Ç–µ—Å—Ç–æ–≤)
   - –û—Å—Ç–∞–ª—å–Ω—ã–µ Doctrine mappings (3 —Ñ–∞–π–ª–∞)
   - Integration —Ç–µ—Å—Ç—ã (5 —Ç–µ—Å—Ç–æ–≤)
2. **–ù–∞—á–∞—Ç—å HTTP Layer**:
   - CourseController (10 endpoints)
   - Request/Response DTOs
   - OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è

## üèÜ Sprint 23 Progress

**–î–µ–Ω—å 4 –∏–∑ 5 –∑–∞–≤–µ—Ä—à–µ–Ω**. Infrastructure Layer –Ω–∞ 70% –≥–æ—Ç–æ–≤. –ó–∞–≤—Ç—Ä–∞ - –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–Ω—å —Å–ø—Ä–∏–Ω—Ç–∞, –Ω—É–∂–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å Infrastructure –∏ –Ω–∞—á–∞—Ç—å HTTP —Å–ª–æ–π –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ–≥–æ vertical slice. 