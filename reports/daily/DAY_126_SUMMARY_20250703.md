# –î–µ–Ω—å 126 (–ö–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–π –¥–µ–Ω—å 13) - Sprint 26, –î–µ–Ω—å 3/5

**–î–∞—Ç–∞**: 3 –∏—é–ª—è 2025  
**–ö–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–π –¥–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞**: 13 (—Å 21 –∏—é–Ω—è 2025)

## üéØ –¶–µ–ª–∏ –¥–Ω—è
- –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ Competency —Å–µ—Ä–≤–∏—Å–∞
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å JWT Service –¥–ª—è API Gateway
- –°–æ–∑–¥–∞—Ç—å Service Router –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞

### 1. JWT Service Implementation
**–°–æ–∑–¥–∞–Ω–æ**: `FirebaseJwtService` —Å –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è access –∏ refresh —Ç–æ–∫–µ–Ω–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø–æ–¥–ø–∏—Å–∏ –∏ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ —Å blacklist –º–µ—Ö–∞–Ω–∏–∑–º–æ–º
- 10 unit —Ç–µ—Å—Ç–æ–≤, –≤—Å–µ –ø—Ä–æ—Ö–æ–¥—è—Ç

**–ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:
- `FirebaseJwtService.php` - –æ—Å–Ω–æ–≤–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ claims –¥–ª—è —Ä–æ–ª–µ–π –∏ permissions
- –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è refresh —Ç–æ–∫–µ–Ω–æ–≤

### 2. Service Router Implementation
**–°–æ–∑–¥–∞–Ω–æ**: –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —Ä–æ—É—Ç–µ—Ä –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –∫ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º URL
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ –ø—É—Ç—è—Ö ({id})
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤
- 12 unit —Ç–µ—Å—Ç–æ–≤, –≤—Å–µ –ø—Ä–æ—Ö–æ–¥—è—Ç

**–ú–∞—Ä—à—Ä—É—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**:
- User Service: `/api/v1/users/*`
- Auth Service: `/api/v1/auth/*`
- Competency Service: `/api/v1/competencies/*`
- Learning Service: `/api/v1/courses/*`, `/api/v1/enrollments`
- Program Service: `/api/v1/programs/*`
- Notification Service: `/api/v1/notifications/*`

### 3. Domain Layer Additions
**Value Objects**:
- `HttpMethod` - —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ HTTP –º–µ—Ç–æ–¥—ã
- `ServiceEndpoint` - –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω–µ—á–Ω–æ–π —Ç–æ—á–∫–∏ —Å–µ—Ä–≤–∏—Å–∞

**Exceptions**:
- `RouteNotFoundException` - –º–∞—Ä—à—Ä—É—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω
- `ServiceNotFoundException` - —Å–µ—Ä–≤–∏—Å –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω

**Interfaces**:
- `ServiceRouterInterface` - –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–ª—è —Ä–æ—É—Ç–µ—Ä–∞

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
1. `src/ApiGateway/Infrastructure/Jwt/FirebaseJwtService.php` (144 —Å—Ç—Ä–æ–∫–∏)
2. `tests/Unit/ApiGateway/Infrastructure/Jwt/FirebaseJwtServiceTest.php` (156 —Å—Ç—Ä–æ–∫)
3. `src/ApiGateway/Infrastructure/Router/ServiceRouter.php` (150 —Å—Ç—Ä–æ–∫)
4. `tests/Unit/ApiGateway/Infrastructure/Router/ServiceRouterTest.php` (127 —Å—Ç—Ä–æ–∫)
5. `src/ApiGateway/Domain/Services/ServiceRouterInterface.php` (39 —Å—Ç—Ä–æ–∫)
6. `src/ApiGateway/Domain/ValueObjects/HttpMethod.php` (93 —Å—Ç—Ä–æ–∫–∏)
7. `src/ApiGateway/Domain/ValueObjects/ServiceEndpoint.php` (58 —Å—Ç—Ä–æ–∫)
8. `src/ApiGateway/Domain/Exceptions/RouteNotFoundException.php` (14 —Å—Ç—Ä–æ–∫)
9. `src/ApiGateway/Domain/Exceptions/ServiceNotFoundException.php` (14 —Å—Ç—Ä–æ–∫)

### –¢–µ—Å—Ç—ã:
- **–ù–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤**: 22 (10 –¥–ª—è JWT + 12 –¥–ª—è Router)
- **–í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç**: ‚úÖ

## ‚è±Ô∏è –ó–∞—Ç—Ä–∞—á–µ–Ω–Ω–æ–µ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è:
- **JWT Service —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è**: ~25 –º–∏–Ω—É—Ç
- **Service Router —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è**: ~20 –º–∏–Ω—É—Ç
- **Value Objects –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã**: ~10 –º–∏–Ω—É—Ç
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤**: ~5 –º–∏–Ω—É—Ç
- **–û–±—â–µ–µ –≤—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**: ~60 –º–∏–Ω—É—Ç

## üìà –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
- **–°–∫–æ—Ä–æ—Å—Ç—å –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∫–æ–¥–∞**: ~13 —Å—Ç—Ä–æ–∫/–º–∏–Ω—É—Ç—É
- **–°–∫–æ—Ä–æ—Å—Ç—å –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤**: ~22 —Ç–µ—Å—Ç–∞/—á–∞—Å
- **–í—Ä–µ–º—è –Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫**: 8% –æ—Ç –æ–±—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å TDD**: –≤—ã—Å–æ–∫–∞—è, –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —Å –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–∞ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## üîÑ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å Sprint 26:
- –î–µ–Ω—å 3 –∏–∑ 5
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ 60% –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
- JWT Service: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω
- Service Router: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω
- –û—Å—Ç–∞–ª–æ—Å—å: HTTP Controllers, Integration tests, Competency —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

## üéØ –ü–ª–∞–Ω –Ω–∞ –∑–∞–≤—Ç—Ä–∞ (–î–µ–Ω—å 127):
1. –°–æ–∑–¥–∞—Ç—å HTTP Controllers –¥–ª—è API Gateway
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
3. –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ Competency —Å–µ—Ä–≤–∏—Å–∞
4. –ù–∞—á–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é API Gateway

## üí° –ó–∞–º–µ—Ç–∫–∏:
- JWT —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Firebase JWT –±–∏–±–ª–∏–æ—Ç–µ–∫—É
- Service Router –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –º–∞—Ä—à—Ä—É—Ç–æ–≤
- Blacklist –¥–ª—è —Ç–æ–∫–µ–Ω–æ–≤ –ø–æ–∫–∞ in-memory, –≤ production –Ω—É–∂–µ–Ω Redis
- –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≥–æ—Ç–æ–≤—ã –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ 