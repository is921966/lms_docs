# Sprint 3: Competency Management Service

## üìÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–ø—Ä–∏–Ω—Ç–µ
- **–°—Ç–∞—Ä—Ç**: 2025-01-22
- **–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: 10 –¥–Ω–µ–π
- **–¶–µ–ª—å**: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏—è–º–∏ —Å –ø–æ–ª–Ω—ã–º TDD –ø–æ–∫—Ä—ã—Ç–∏–µ–º

## üéØ –¶–µ–ª–∏ —Å–ø—Ä–∏–Ω—Ç–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ü–µ–ª–∏
1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Domain –º–æ–¥–µ–ª—å –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–π
2. –°–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –æ—Ü–µ–Ω–∫–∏ –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–π
3. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–∏ —Å –ø–æ–∑–∏—Ü–∏—è–º–∏
4. –û–±–µ—Å–ø–µ—á–∏—Ç—å 80%+ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

### –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞
- [ ] 100% Domain —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] 80%+ –ø–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ —Ç–µ—Å—Ç–∞–º–∏
- [ ] –í—Å–µ API endpoints –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã
- [ ] 0 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–≥–æ–≤
- [ ] –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–∞ < 100ms

## üìã User Stories

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏—è–º–∏
**–ö–∞–∫** HR-–º–µ–Ω–µ–¥–∂–µ—Ä  
**–Ø —Ö–æ—á—É** —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–∏  
**–ß—Ç–æ–±—ã** —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –¥–æ–ª–∂–Ω–æ—Å—Ç—è–º

**Acceptance Criteria:**
- –ö–æ–º–ø–µ—Ç–µ–Ω—Ü–∏—è –∏–º–µ–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ, –∫–∞—Ç–µ–≥–æ—Ä–∏—é
- –ö–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–∏ –º–æ–≥—É—Ç –±—ã—Ç—å —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏–µ—Ä–∞—Ä—Ö–∏–∏ –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–π (—Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ/–¥–æ—á–µ—Ä–Ω–∏–µ)
- –í–∞–ª–∏–¥–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏—è –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

### 2. –£—Ä–æ–≤–Ω–∏ –≤–ª–∞–¥–µ–Ω–∏—è –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–µ–π
**–ö–∞–∫** —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å  
**–Ø —Ö–æ—á—É** –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —É—Ä–æ–≤–Ω–∏ –≤–ª–∞–¥–µ–Ω–∏—è –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏—è–º–∏  
**–ß—Ç–æ–±—ã** —Ç–æ—á–Ω–æ –æ—Ü–µ–Ω–∏–≤–∞—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

**Acceptance Criteria:**
- 5 —É—Ä–æ–≤–Ω–µ–π: Beginner, Elementary, Intermediate, Advanced, Expert
- –ö–∞–∂–¥—ã–π —É—Ä–æ–≤–µ–Ω—å –∏–º–µ–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏ —É—Ä–æ–≤–Ω–µ–π –¥–ª—è –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–∏
- –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è —É—Ä–æ–≤–Ω–µ–π

### 3. –û—Ü–µ–Ω–∫–∞ –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
**–ö–∞–∫** —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å  
**–Ø —Ö–æ—á—É** –æ—Ü–µ–Ω–∏–≤–∞—Ç—å –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–∏ —Å–≤–æ–∏—Ö –ø–æ–¥—á–∏–Ω–µ–Ω–Ω—ã—Ö  
**–ß—Ç–æ–±—ã** –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –∏—Ö —Ä–∞–∑–≤–∏—Ç–∏–µ

**Acceptance Criteria:**
- –û—Ü–µ–Ω–∫–∞ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º –∏ –¥–∞—Ç–æ–π
- –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ü–µ–Ω–æ–∫
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∏
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏ –≤—ã—à–µ—Å—Ç–æ—è—â–∏–º —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–º

## üèóÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### Domain Layer

#### Entities
```php
// Competency.php
- id: CompetencyId
- name: string
- description: string
- category: CompetencyCategory
- parentId: ?CompetencyId
- levels: CompetencyLevel[]
- isActive: bool
- metadata: array

// CompetencyAssessment.php
- id: AssessmentId
- competencyId: CompetencyId
- userId: UserId
- assessorId: UserId
- level: CompetencyLevel
- comment: ?string
- assessedAt: DateTimeImmutable
- confirmedBy: ?UserId
- confirmedAt: ?DateTimeImmutable
```

#### Value Objects
```php
// CompetencyId.php
// CompetencyCategory.php (Technical, Soft, Leadership, etc.)
// CompetencyLevel.php (Beginner...Expert)
// AssessmentId.php
```

#### Domain Services
```php
// CompetencyAssessmentService.php
- assessCompetency()
- confirmAssessment()
- getAssessmentHistory()
- calculateProgress()
```

### Application Layer

#### Services
```php
// CompetencyService.php
- createCompetency()
- updateCompetency()
- deactivateCompetency()
- assignToPosition()
- getCompetencyTree()

// AssessmentService.php
- createAssessment()
- updateAssessment()
- confirmAssessment()
- getEmployeeCompetencies()
- getGapAnalysis()
```

### Infrastructure Layer

#### Repositories
```php
// CompetencyRepository.php
- save()
- findById()
- findByCategory()
- findActive()
- search()

// AssessmentRepository.php
- save()
- findByUser()
- findByCompetency()
- getHistory()
- getStatistics()
```

## üìù –ó–∞–¥–∞—á–∏ —Å–ø—Ä–∏–Ω—Ç–∞

### –î–µ–Ω—å 1-2: Domain Models
- [ ] CompetencyId value object + —Ç–µ—Å—Ç—ã
- [ ] CompetencyCategory value object + —Ç–µ—Å—Ç—ã
- [ ] CompetencyLevel value object + —Ç–µ—Å—Ç—ã
- [ ] Competency entity + —Ç–µ—Å—Ç—ã
- [ ] CompetencyAssessment entity + —Ç–µ—Å—Ç—ã

### –î–µ–Ω—å 3-4: Repositories
- [ ] CompetencyRepositoryInterface
- [ ] CompetencyRepository + —Ç–µ—Å—Ç—ã
- [ ] AssessmentRepositoryInterface
- [ ] AssessmentRepository + —Ç–µ—Å—Ç—ã

### –î–µ–Ω—å 5-6: Domain Services
- [ ] CompetencyAssessmentService + —Ç–µ—Å—Ç—ã
- [ ] –ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞ –æ—Ü–µ–Ω–∫–∏
- [ ] –†–∞—Å—á–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- [ ] –°–æ–±—ã—Ç–∏—è –¥–æ–º–µ–Ω–∞

### –î–µ–Ω—å 7-8: Application Services
- [ ] CompetencyService + —Ç–µ—Å—Ç—ã
- [ ] AssessmentService + —Ç–µ—Å—Ç—ã
- [ ] DTO –∏ –º–∞–ø–ø–∏–Ω–≥
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è

### –î–µ–Ω—å 9-10: HTTP Layer & Integration
- [ ] CompetencyController
- [ ] AssessmentController
- [ ] API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] Integration —Ç–µ—Å—Ç—ã
- [ ] –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î

## üß™ –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### TDD Workflow
1. **–ö–∞–∂–¥–∞—è —Ñ–∏—á–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —Ç–µ—Å—Ç–∞**
   ```bash
   # 1. –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç
   vim tests/Unit/Competency/Domain/CompetencyTest.php
   
   # 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å - RED
   make test-one TEST=CompetencyTest
   
   # 3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å
   vim src/Competency/Domain/Competency.php
   
   # 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å - GREEN
   make test-one TEST=CompetencyTest
   ```

2. **–ú–∞–ª—ã–µ –∏—Ç–µ—Ä–∞—Ü–∏–∏**
   - –ú–∞–∫—Å–∏–º—É–º 2 —á–∞—Å–∞ –Ω–∞ —Ñ–∏—á—É
   - –ö–æ–º–º–∏—Ç –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∑–µ–ª–µ–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
   - –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∑–µ–ª–µ–Ω—ã—Ö —Ç–µ—Å—Ç–∞—Ö

3. **–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ**
   ```php
   // –§–∞–±—Ä–∏–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤
   CompetencyFactory::create()
       ->withName('PHP Development')
       ->withCategory(CompetencyCategory::TECHNICAL)
       ->withLevels(CompetencyLevel::defaults())
       ->build();
   ```

## üìä –î–Ω–µ–≤–Ω–æ–π —á–µ–∫-–ª–∏—Å—Ç

- [ ] –£—Ç—Ä–æ: –ü–ª–∞–Ω –Ω–∞ –¥–µ–Ω—å (–∫–∞–∫–∏–µ —Ç–µ—Å—Ç—ã –ø–∏—Å–∞—Ç—å)
- [ ] –ö–∞–∂–¥—ã–µ 30 –º–∏–Ω: –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
- [ ] –ö–∞–∂–¥—ã–µ 2 —á–∞—Å–∞: –ö–æ–º–º–∏—Ç
- [ ] –û–±–µ–¥: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∫—Ä—ã—Ç–∏—è
- [ ] –í–µ—á–µ—Ä: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

## üöÄ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã

```bash
# –ë—ã—Å—Ç—Ä–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
make test-one TEST=CompetencyTest     # –û–¥–∏–Ω —Ç–µ—Å—Ç
make test-class CLASS=Competency       # –í—Å–µ —Ç–µ—Å—Ç—ã –∫–ª–∞—Å—Å–∞
make test-domain                       # –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–º–µ–Ω–∞

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞
make test-coverage                     # –ü–æ–∫—Ä—ã—Ç–∏–µ
make stan                             # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
make cs-fix                           # Code style

# Continuous testing
make test-watch                       # –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫
```

## ‚ö†Ô∏è –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

| –†–∏—Å–∫ | –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å | –ú–∏—Ç–∏–≥–∞—Ü–∏—è |
|------|-------------|-----------|
| –°–ª–æ–∂–Ω–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–π | –í—ã—Å–æ–∫–∞—è | –ù–∞—á–∞—Ç—å —Å –ø–ª–æ—Å–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã |
| Performance –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ | –°—Ä–µ–¥–Ω—è—è | –ò–Ω–¥–µ–∫—Å—ã –ë–î, –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ |
| –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö | –ù–∏–∑–∫–∞—è | Import —Å–µ—Ä–≤–∏—Å —Å –º–∞–ø–ø–∏–Ω–≥–æ–º |

## üìù Definition of Done

- [ ] –ö–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Unit —Ç–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã –∏ –ø—Ä–æ—Ö–æ–¥—è—Ç (>80% –ø–æ–∫—Ä—ã—Ç–∏–µ)
- [ ] Integration —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—É—Ç–µ–π
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [ ] Code review –ø—Ä–æ–π–¥–µ–Ω
- [ ] –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–º–µ—á–∞–Ω–∏–π –æ—Ç –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–≤
- [ ] –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã

## üéØ –ò—Ç–æ–≥–∏ —Å–ø—Ä–∏–Ω—Ç–∞

–ö –∫–æ–Ω—Ü—É —Å–ø—Ä–∏–Ω—Ç–∞ –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å:
1. –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π Competency Management Service
2. 80%+ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
3. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π API
4. –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

---

**–ü–æ–º–Ω–∏**: –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö —Ç–µ—Å—Ç–æ–≤! 