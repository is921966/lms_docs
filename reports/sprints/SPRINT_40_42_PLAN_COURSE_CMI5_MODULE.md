# Sprint 40-42: Course Management + Cmi5 Support Module

**–ú–æ–¥—É–ª—å**: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ Course Management –ø–æ–ª–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Cmi5  
**–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: 15 –¥–Ω–µ–π (3 —Å–ø—Ä–∏–Ω—Ç–∞ –ø–æ 5 –¥–Ω–µ–π)  
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: Production-ready —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–∞–º–∏ —Å Cmi5/xAPI  
**TestFlight**: v2.0.0-cmi5  
**–ù–∞—á–∞–ª–æ**: Sprint 40 (–ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è Sprint 39)

## üéØ –ë–∏–∑–Ω–µ—Å-–æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –≤—ã–±–æ—Ä–∞

### –ü–æ—á–µ–º—É Course Management + Cmi5:
1. **–õ–æ–≥–∏—á–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ** - —É –Ω–∞—Å —É–∂–µ –µ—Å—Ç—å –±–∞–∑–æ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–∞–º–∏
2. **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã** - Cmi5 –∑–∞–º–µ–Ω—è–µ—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏–π SCORM
3. **–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ** - –º–∞–ª–æ –∫—Ç–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Cmi5
4. **–ì–æ—Ç–æ–≤–∞—è –±–∞–∑–∞** - –º–æ–∂–µ–º —Å—Ä–∞–∑—É –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫—É—Ä—Å–∞–º
5. **–í—ã—Å–æ–∫–∏–π —Å–ø—Ä–æ—Å** - enterprise –∫–ª–∏–µ–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç Cmi5

### –ß—Ç–æ —É–∂–µ –µ—Å—Ç—å (Course Management):
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—É—Ä—Å–æ–≤
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª–µ–π –∏ —É—Ä–æ–∫–æ–≤
- ‚úÖ Enrollment –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å
- ‚úÖ –ë–∞–∑–æ–≤—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã (PDF, –≤–∏–¥–µ–æ)
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç Cmi5:
- üÜï –ò–º–ø–æ—Ä—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- üÜï –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π (xAPI)
- üÜï –û—Ñ–ª–∞–π–Ω –æ–±—É—á–µ–Ω–∏–µ —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π
- üÜï –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –æ–±—É—á–µ–Ω–∏—è
- üÜï –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å authoring tools

## üìã User Stories - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Course Management

### Epic 1: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ Course Builder

#### Story 1.1: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Cmi5 –≤ —Å–æ–∑–¥–∞–Ω–∏–µ –∫—É—Ä—Å–∞
**–ö–∞–∫** –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∫—É—Ä—Å–æ–≤  
**–Ø —Ö–æ—á—É** –¥–æ–±–∞–≤–ª—è—Ç—å Cmi5 –∫–æ–Ω—Ç–µ–Ω—Ç –≤ –∫—É—Ä—Å—ã  
**–ß—Ç–æ–±—ã** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç

**–î–µ—Ç–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è**:
```gherkin
Feature: Cmi5 in Course Builder

Scenario: Add Cmi5 package to existing course
  Given I am editing course "iOS Development"
  When I click "Add Content" in module
  Then I see options: "Video", "Document", "Quiz", "Cmi5 Package"
  When I select "Cmi5 Package"
  Then I can upload .zip file
  And package is validated
  And activities are added as lessons

Scenario: Create course from Cmi5 package
  Given I have Cmi5 package "Complete Swift Course"
  When I click "Create Course from Package"
  Then course structure is auto-generated
  And all activities become lessons
  And I can customize before saving
```

**UI –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ CourseDetailView**:
```swift
// –î–æ–±–∞–≤–ª—è–µ–º –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π CourseDetailView
struct CourseDetailView: View {
    // ... existing code ...
    
    var contentSection: some View {
        Section("Course Content") {
            ForEach(course.modules) { module in
                ModuleRow(module: module)
            }
            
            // NEW: Cmi5 import button
            Button(action: { showCmi5Import = true }) {
                Label("Import Cmi5 Package", systemImage: "square.and.arrow.down")
            }
            .sheet(isPresented: $showCmi5Import) {
                Cmi5ImportView(course: course)
            }
        }
    }
}
```

### Epic 2: –£–ª—É—á—à–µ–Ω–Ω—ã–π Learning Experience

#### Story 2.1: Unified Course Player
**–ö–∞–∫** —É—á–∞—â–∏–π—Å—è  
**–Ø —Ö–æ—á—É** –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –≤—Å–µ —Ç–∏–ø—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ –æ–¥–Ω–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ  
**–ß—Ç–æ–±—ã** –∏–º–µ—Ç—å –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–π –æ–ø—ã—Ç –æ–±—É—á–µ–Ω–∏—è

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π CoursePlayerView**:
```swift
// –†–∞—Å—à–∏—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π player
enum ContentType {
    case video(URL)
    case document(URL)
    case quiz(TestID)
    case cmi5(Cmi5Activity) // NEW
}

struct CoursePlayerView: View {
    func contentView(for lesson: Lesson) -> some View {
        switch lesson.contentType {
        case .video(let url):
            VideoPlayer(url: url)
        case .document(let url):
            PDFViewer(url: url)
        case .quiz(let testID):
            TestPlayerView(testID: testID)
        case .cmi5(let activity): // NEW
            Cmi5PlayerView(activity: activity,
                          onStatement: handleXAPIStatement)
        }
    }
}
```

### Epic 3: –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∫—É—Ä—Å–æ–≤

#### Story 3.1: xAPI Analytics Dashboard
**–ö–∞–∫** —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –æ–±—É—á–µ–Ω–∏—è  
**–Ø —Ö–æ—á—É** –≤–∏–¥–µ—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É –ø–æ –≤—Å–µ–º –∫—É—Ä—Å–∞–º  
**–ß—Ç–æ–±—ã** –ø–æ–Ω–∏–º–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –æ–±—É—á–µ–Ω–∏—è

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ AnalyticsDashboard**:
- –î–æ–±–∞–≤–∏—Ç—å –≤–∫–ª–∞–¥–∫—É "xAPI Insights"
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å learning paths
- Heatmap –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ–±—ã—á–Ω—ã—Ö –∏ Cmi5 –∫—É—Ä—Å–æ–≤

## üèóÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:

#### CourseService Enhancement:
```swift
// –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π CourseService
class CourseService {
    // ... existing methods ...
    
    // NEW: Cmi5 support
    func importCmi5Package(_ packageURL: URL, 
                          into courseID: UUID) async throws {
        let package = try await cmi5Parser.parse(packageURL)
        let activities = try await createLessonsFromActivities(package)
        try await addLessonsToCourse(courseID, activities)
    }
    
    func getCmi5Metadata(for lessonID: UUID) async -> Cmi5Metadata? {
        // Retrieve Cmi5-specific data
    }
}
```

#### –ù–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è Cmi5:
```swift
// NEW: Cmi5-specific services
class Cmi5Service: ObservableObject {
    func launchActivity(_ activity: Cmi5Activity, 
                       for learner: User) async -> LaunchData
    func processStatement(_ statement: XAPIStatement) async
    func getProgress(for activityID: UUID, 
                    learnerID: UUID) async -> Progress
}

class XAPIService: ObservableObject {
    func sendStatement(_ statement: XAPIStatement) async
    func queryStatements(filters: XAPIFilters) async -> [XAPIStatement]
    func generateAnalytics(for courseID: UUID) async -> XAPIAnalytics
}
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö - –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å—Ö–µ–º—ã:

–ö —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —Ç–∞–±–ª–∏—Ü–∞–º courses –∏ lessons –¥–æ–±–∞–≤–ª—è–µ–º:
```sql
-- –°–≤—è–∑—å –∫—É—Ä—Å–æ–≤ —Å Cmi5
ALTER TABLE lessons ADD COLUMN cmi5_activity_id UUID;
ALTER TABLE lessons ADD COLUMN content_type VARCHAR(20);

-- –ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è Cmi5 (—Å–º. migration 017)
CREATE TABLE cmi5_packages ...
CREATE TABLE cmi5_activities ...
CREATE TABLE xapi_statements ...
```

## üìÖ –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –ø–æ –¥–Ω—è–º

### Sprint 40 (–î–Ω–∏ 1-5): Foundation + Course Integration

#### –î–µ–Ω—å 1: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –î–µ—Ç–∞–ª—å–Ω—ã–π technical design document
- [ ] –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å—Ö–µ–º—ã –ë–î –¥–ª—è courses/lessons
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ Cmi5 domain models
- [ ] –ù–∞–ø–∏—Å–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
- [ ] TDD: –º–æ–¥–µ–ª–∏ –∏ value objects

#### –î–µ–Ω—å 2: Cmi5 Parser –∏ –∏–º–ø–æ—Ä—Ç
- [ ] Cmi5PackageParser implementation
- [ ] Manifest validator
- [ ] Activity extractor
- [ ] Integration —Å CourseService
- [ ] TDD: parser –∏ validator

#### –î–µ–Ω—å 3: UI –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –≤ Course Builder
- [ ] Cmi5ImportView —Å–æ–∑–¥–∞–Ω–∏–µ
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ CourseDetailView
- [ ] Drag & drop –¥–ª—è –ø–∞–∫–µ—Ç–æ–≤
- [ ] Preview –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- [ ] Mapping activities –Ω–∞ lessons

#### –î–µ–Ω—å 4: Backend API —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
- [ ] –†–∞—Å—à–∏—Ä–∏—Ç—å course API –¥–ª—è Cmi5
- [ ] Endpoints –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –ø–∞–∫–µ—Ç–æ–≤
- [ ] xAPI endpoints (statements)
- [ ] –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è LRS
- [ ] Integration —Ç–µ—Å—Ç—ã

#### –î–µ–Ω—å 5: –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç—ã
- [ ] E2E —Ç–µ—Å—Ç: —Å–æ–∑–¥–∞–Ω–∏–µ –∫—É—Ä—Å–∞ —Å Cmi5
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
- [ ] UI —Ç–µ—Å—Ç—ã –∏–º–ø–æ—Ä—Ç–∞
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞
- [ ] TestFlight build 2.0.0-alpha1

### Sprint 41 (–î–Ω–∏ 6-10): Player –∏ Learning Experience

#### –î–µ–Ω—å 6: Cmi5 Player –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [ ] Cmi5PlayerView –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- [ ] WebView —Å launch parameters
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ CoursePlayerView
- [ ] Session management
- [ ] Navigation controls

#### –î–µ–Ω—å 7: xAPI Statement tracking
- [ ] Real-time statement capture
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º –∫—É—Ä—Å–∞
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ CourseProgress
- [ ] Statement validation
- [ ] Queue –¥–ª—è –æ—Ñ–ª–∞–π–Ω

#### –î–µ–Ω—å 8: –û—Ñ–ª–∞–π–Ω –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- [ ] Download Cmi5 content
- [ ] Local content serving
- [ ] Offline statement queue
- [ ] –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
- [ ] Conflict resolution

#### –î–µ–Ω—å 9: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- [ ] xAPI tab –≤ AnalyticsDashboard
- [ ] Learning path visualization
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å course analytics
- [ ] –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã
- [ ] Export —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

#### –î–µ–Ω—å 10: Polish –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [ ] –ü–æ–ª–Ω—ã–π user flow testing
- [ ] Performance optimization
- [ ] UI improvements
- [ ] Bug fixes
- [ ] TestFlight build 2.0.0-beta1

### Sprint 42 (–î–Ω–∏ 11-15): Production Polish

#### –î–µ–Ω—å 11: –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- [ ] Bulk import –¥–ª—è –∫—É—Ä—Å–æ–≤
- [ ] –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤
- [ ] A/B testing –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- [ ] Advanced completion rules
- [ ] Adaptive learning hints

#### –î–µ–Ω—å 12: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–æ–ª—å—à–∏—Ö –ø–∞–∫–µ—Ç–æ–≤
- [ ] CDN –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [ ] Caching —Å—Ç—Ä–∞—Ç–µ–≥–∏—è
- [ ] Background processing
- [ ] Load testing

#### –î–µ–Ω—å 13: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ compliance
- [ ] Security audit Cmi5/xAPI
- [ ] Data privacy compliance
- [ ] Encryption –¥–ª—è statements
- [ ] Access control testing
- [ ] GDPR compliance

#### –î–µ–Ω—å 14: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –æ–±—É—á–µ–Ω–∏–µ
- [ ] Admin guide –¥–ª—è Cmi5
- [ ] –í–∏–¥–µ–æ —Ç—É—Ç–æ—Ä–∏–∞–ª—ã
- [ ] Best practices guide
- [ ] Troubleshooting guide
- [ ] API documentation

#### –î–µ–Ω—å 15: Production Release
- [ ] Final regression testing
- [ ] Performance benchmarks
- [ ] TestFlight 2.0.0 release
- [ ] Release notes
- [ ] Stakeholder demo

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ - –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –ø–æ–¥—Ö–æ–¥

### –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ—Å—Ç–æ–≤:
- CourseServiceTests + Cmi5 scenarios (20 —Ç–µ—Å—Ç–æ–≤)
- CourseDetailViewTests + import UI (15 —Ç–µ—Å—Ç–æ–≤)
- CoursePlayerViewTests + Cmi5 player (20 —Ç–µ—Å—Ç–æ–≤)

### –ù–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è Cmi5:
- Cmi5PackageParserTests (30 —Ç–µ—Å—Ç–æ–≤)
- XAPIServiceTests (40 —Ç–µ—Å—Ç–æ–≤)
- Cmi5PlayerViewTests (25 —Ç–µ—Å—Ç–æ–≤)
- LRS integration tests (20 —Ç–µ—Å—Ç–æ–≤)

### E2E —Å—Ü–µ–Ω–∞—Ä–∏–∏:

#### 1. –ü–æ–ª–Ω–æ–µ —Ä—É—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫—É—Ä—Å–∞
**–°—Ü–µ–Ω–∞—Ä–∏–π**: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–æ–∑–¥–∞–µ—Ç –∫—É—Ä—Å —Å –Ω—É–ª—è —Å–æ –≤—Å–µ–º–∏ —Ç–∏–ø–∞–º–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
```gherkin
Feature: Complete Course Creation

Background:
  Given I am logged in as course administrator
  And I am on courses management page

Scenario: Create comprehensive course manually
  # –°–æ–∑–¥–∞–Ω–∏–µ –∫—É—Ä—Å–∞
  When I click "Create New Course"
  And I fill course details:
    | Field | Value |
    | Title | –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∫—É—Ä—Å iOS —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ |
    | Description | –ü–æ–ª–Ω—ã–π –∫—É—Ä—Å –æ—Ç –æ—Å–Ω–æ–≤ –¥–æ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö —Ç–µ–º |
    | Category | –ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ |
    | Duration | 40 —á–∞—Å–æ–≤ |
    | Level | Beginner to Advanced |
  And I upload course cover image
  And I set enrollment rules:
    | Auto-enroll positions | iOS Developer, Mobile Developer |
    | Prerequisites | Basic Programming Knowledge |
    | Max students | 50 |
  And I click "Save Course"
  Then course is created successfully
  
  # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥—É–ª–µ–π
  When I click "Add Module"
  And I create module "–û—Å–Ω–æ–≤—ã Swift":
    | Order | 1 |
    | Description | –ë–∞–∑–æ–≤—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å —è–∑—ã–∫–∞ Swift |
    | Duration | 8 —á–∞—Å–æ–≤ |
  
  # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
  When I add lesson "Introduction to Swift":
    | Type | Video |
    | File | intro_swift.mp4 |
    | Duration | 45 min |
    | Allow download | Yes |
  
  When I add lesson "Swift Playground":
    | Type | Document |
    | File | swift_basics.pdf |
    | Pages | 25 |
    | Required reading time | 30 min |
  
  When I add lesson "Variables and Constants":
    | Type | SCORM package |
    | File | variables_interactive.zip |
    | Passing score | 80% |
    | Attempts allowed | 3 |
  
  When I add lesson "Swift Basics Test":
    | Type | Quiz |
    | Questions | 20 |
    | Time limit | 30 min |
    | Passing score | 70% |
    | Show correct answers | After submission |
  
  # –ù–û–í–û–ï: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Cmi5 –∫–æ–Ω—Ç–µ–Ω—Ç–∞
  When I add lesson "Advanced Swift Concepts":
    | Type | Cmi5 Package |
    | File | advanced_swift_cmi5.zip |
    | Launch mode | Normal |
    | Mastery score | 85% |
  
  # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
  When I set lesson sequence:
    | Lesson 1 must be completed before Lesson 2 |
    | Lesson 2 must be completed before Lesson 3 |
    | Quiz unlocks after all lessons |
  
  # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
  When I add course resources:
    | Swift Language Guide.pdf |
    | Code Examples.zip |
    | Useful Links.docx |
  
  # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
  When I configure completion certificate:
    | Template | Professional Certificate |
    | Completion criteria | All modules 100% |
    | Include score | Yes |
    | Validity | 2 years |
  
  Then course structure is saved
  And course is published
  And enrolled students can access it
```

#### 2. –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫—É—Ä—Å–∞
**–°—Ü–µ–Ω–∞—Ä–∏–π**: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –≤–Ω–æ—Å–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–æ –≤—Å–µ –∞—Å–ø–µ–∫—Ç—ã –∫—É—Ä—Å–∞
```gherkin
Feature: Comprehensive Course Editing

Scenario: Edit all aspects of existing course
  Given course "iOS Development" exists with:
    | 3 modules |
    | 15 lessons |
    | 45 enrolled students |
    | Average progress 35% |
  
  # –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
  When I open course for editing
  And I update course details:
    | Title | iOS Development 2025 Edition |
    | Add tags | Swift 5.9, SwiftUI, Cmi5 |
    | Update duration | 45 hours |
  
  # –†–µ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª–µ–π
  When I reorder modules:
    | Move "Advanced Topics" before "Intermediate" |
    | Merge "UIKit Basics" into "UI Development" |
    | Split "Networking" into "REST API" and "WebSockets" |
  
  # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
  When I edit lesson "SwiftUI Basics":
    | Replace video | swiftui_2025.mp4 |
    | Update duration | 60 min |
    | Add captions | English, Russian |
    | Add chapter markers | Introduction, Components, Layout |
  
  # –ó–∞–º–µ–Ω–∞ SCORM –Ω–∞ Cmi5
  When I select lesson "Interactive Practice"
  And I click "Convert to Cmi5"
  And I upload "practice_cmi5.zip"
  Then old SCORM package is archived
  And student progress is preserved
  And new Cmi5 content is active
  
  # –ú–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
  When I select multiple lessons
  And I bulk update:
    | Add tag | Updated 2025 |
    | Enable offline mode | Yes |
    | Update completion time | +10% |
  
  # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
  When I edit quiz "Module 1 Test":
    | Add question bank | 50 questions |
    | Randomize questions | Pick 20 of 50 |
    | Add time pressure | -1 point per minute over limit |
    | Enable proctoring | Camera required |
  
  # –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
  When I save changes as new version:
    | Version | 2.0 |
    | Changelog | Updated for 2025, added Cmi5 support |
    | Migration plan | Auto-upgrade active learners |
  
  Then all changes are saved
  And active learners see update notification
  And progress is maintained
```

#### 3. Cmi5 —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
**–°—Ü–µ–Ω–∞—Ä–∏–π**: –†–∞–±–æ—Ç–∞ —Å Cmi5 –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
```gherkin
Feature: Cmi5 Content Management

Scenario: Import and configure Cmi5 package
  Given I am editing course "Professional Development"
  
  When I click "Import Cmi5 Content"
  And I drag and drop "leadership_skills_cmi5.zip"
  Then I see package validation:
    | Valid manifest | ‚úì |
    | Activities found | 12 |
    | Total size | 245 MB |
    | xAPI profiles | cmi5, video |
  
  When I click "Configure Import"
  Then I can map activities to course structure:
    | Activity "Introduction" ‚Üí Module 1, Lesson 1 |
    | Activity "Assessment 1" ‚Üí Module 1, Quiz |
    | Activity "Case Study" ‚Üí Module 2, Lesson 1 |
  
  When I set Cmi5 specific settings:
    | Launch mode | Review |
    | Move on | CompletedOrPassed |
    | Mastery score | 80 |
    | Launch parameters | lang=ru&theme=dark |
  
  And I configure xAPI settings:
    | Statement forwarding | Enabled |
    | Additional endpoints | analytics.lms.com/xapi |
    | Data retention | 2 years |
    | Anonymous mode | Available for learners |
  
  Then Cmi5 content is integrated
  And xAPI statements flow correctly
```

#### 4. –°–º–µ—à–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –∏ –º–∏–≥—Ä–∞—Ü–∏—è
**–°—Ü–µ–Ω–∞—Ä–∏–π**: –ö—É—Ä—Å —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
```gherkin
Feature: Mixed Content Course

Scenario: Create course mixing all content types
  Given I create new course "Hybrid Learning Experience"
  
  # –ú–æ–¥—É–ª—å 1: –¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
  When I add Module 1 "Traditional Learning":
    | PDF documents | 5 files |
    | Videos | 3 files |
    | PowerPoint | 2 files |
  
  # –ú–æ–¥—É–ª—å 2: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
  When I add Module 2 "Interactive Learning":
    | SCORM packages | 2 packages |
    | H5P content | 3 activities |
    | Embedded web apps | 1 app |
  
  # –ú–æ–¥—É–ª—å 3: –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
  When I add Module 3 "Next-Gen Learning":
    | Cmi5 packages | 4 packages |
    | xAPI activities | 6 activities |
    | VR simulations | 2 simulations |
  
  # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –µ–¥–∏–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è
  When I configure unified progression:
    | Track all content types | Yes |
    | Unified progress bar | Yes |
    | Mixed prerequisites | SCORM before Cmi5 |
    | Combined analytics | All in one dashboard |
  
  Then learners see seamless experience
  And all progress is tracked uniformly
  And analytics combine all sources
```

#### 5. –û—Ñ–ª–∞–π–Ω —Å—Ü–µ–Ω–∞—Ä–∏–∏
**–°—Ü–µ–Ω–∞—Ä–∏–π**: –ü–æ–ª–Ω—ã–π –æ—Ñ–ª–∞–π–Ω workflow
```gherkin
Feature: Offline Course Experience

Scenario: Download and complete course offline
  Given I am enrolled in "Mobile Development" course
  And course contains:
    | Videos | 10 files, 2GB |
    | Documents | 15 files, 50MB |
    | Cmi5 packages | 3 packages, 300MB |
    | Quizzes | 5 quizzes |
  
  When I click "Download for Offline"
  Then I see download progress:
    | Optimizing video quality | 720p |
    | Compressing documents | PDF |
    | Packaging Cmi5 | With dependencies |
    | Quiz questions | Encrypted cache |
  
  When I go offline
  And I complete:
    | Watch 3 videos |
    | Read 5 documents |
    | Complete 2 Cmi5 activities |
    | Take 1 quiz |
  
  Then progress is saved locally
  And xAPI statements are queued
  And completion certificates are pending
  
  When I go online
  Then sync process starts:
    | Upload queued statements | 45 statements |
    | Verify quiz answers | With server |
    | Update completion status | 40% ‚Üí 65% |
    | Download new content | If available |
    | Generate certificates | If completed |
```

### Performance —Ç–µ—Å—Ç—ã
- Import 100MB package < 30s
- Statement processing < 50ms
- UI response < 100ms
- Memory usage < 200MB
- Bulk operations (50 items) < 5s
- Offline sync (1000 statements) < 30s

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ:
- 0 regression bugs –≤ Course Management
- < 3 —Å–µ–∫ –∏–º–ø–æ—Ä—Ç –ø–∞–∫–µ—Ç–∞ –¥–æ 50MB
- < 100ms –æ–±—Ä–∞–±–æ—Ç–∫–∞ statement
- 99.9% —É—Å–ø–µ—à–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- 90%+ test coverage

### –ë–∏–∑–Ω–µ—Å:
- 30% –∫—É—Ä—Å–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç Cmi5 –∑–∞ 2 –º–µ—Å—è—Ü–∞
- +25% completion rate –¥–ª—è Cmi5 –∫—É—Ä—Å–æ–≤
- 50% —Å–Ω–∏–∂–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
- NPS > 60 –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ:
- Seamless integration —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∫—É—Ä—Å–∞–º–∏
- –ï–¥–∏–Ω—ã–π –æ–ø—ã—Ç –æ–±—É—á–µ–Ω–∏—è
- –ü–æ–Ω—è—Ç–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:
1. **–õ–µ–≥–∫–∏–π –∏–º–ø–æ—Ä—Ç** –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
2. **–ì–∏–±–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** —Å–º–µ—à–∞–Ω–Ω—ã–º–∏ –∫—É—Ä—Å–∞–º–∏
3. **–î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞** –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π
4. **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### –î–ª—è —É—á–∞—â–∏—Ö—Å—è:
1. **–ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
2. **–û—Ñ–ª–∞–π–Ω –¥–æ—Å—Ç—É–ø** –∫ Cmi5 –∫—É—Ä—Å–∞–º
3. **–î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å** –ø–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—è–º
4. **–ú–æ–±–∏–ª—å–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞** Cmi5

### –î–ª—è —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–π:
1. **ROI –æ–±—É—á–µ–Ω–∏—è** —á–µ—Ä–µ–∑ xAPI analytics
2. **Learning paths** visualization
3. **–°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã** –ø–æ —Ç–∏–ø–∞–º –∫–æ–Ω—Ç–µ–Ω—Ç–∞
4. **–ü—Ä–µ–¥–∏–∫—Ç–∏–≤–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞** (foundation)

## ‚ö†Ô∏è –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

1. **–°–ª–æ–∂–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º**
   - –ú–∏—Ç–∏–≥–∞—Ü–∏—è: –¢—â–∞—Ç–µ–ª—å–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, incremental changes
   - Fallback: Cmi5 –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ç–∏–ø –∫—É—Ä—Å–∞

2. **Performance –ø—Ä–∏ –±–æ–ª—å—à–∏—Ö –ø–∞–∫–µ—Ç–∞—Ö**
   - –ú–∏—Ç–∏–≥–∞—Ü–∏—è: Chunked upload, background processing
   - Monitoring —Å –ø–µ—Ä–≤–æ–≥–æ –¥–Ω—è

3. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã—Ö Cmi5 –ø–∞–∫–µ—Ç–æ–≤**
   - –ú–∏—Ç–∏–≥–∞—Ü–∏—è: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø–æ–ø—É–ª—è—Ä–Ω—ã–º–∏ authoring tools
   - Graceful degradation –¥–ª—è –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

## ‚úÖ Definition of Done

- [ ] Course Management –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Cmi5
- [ ] –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ regression
- [ ] –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∫—Ä—ã—Ç—ã —Ç–µ—Å—Ç–∞–º–∏ >90%
- [ ] Performance SLA –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [ ] TestFlight 2.0.0 –≤—ã–ø—É—â–µ–Ω
- [ ] 5+ –±–µ—Ç–∞-—Ç–µ—Å—Ç–µ—Ä–æ–≤ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª–∏ —Ä–∞–±–æ—Ç—É
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å —Å–æ–±—Ä–∞–Ω–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞

---
*–≠—Ç–æ—Ç –ø–ª–∞–Ω –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ—Ä–≥–∞–Ω–∏—á–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ Course Management —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º Cmi5, —Å–æ–∑–¥–∞–≤–∞—è –º–æ—â–Ω—É—é —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±—É—á–µ–Ω–∏–µ–º.* 