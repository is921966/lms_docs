# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∑–∞–ø—É—Å–∫—É –∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —Ç–µ—Å—Ç–æ–≤

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û

**–ö–æ–¥ –±–µ–∑ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ = –ö–û–î –ù–ï –°–£–©–ï–°–¢–í–£–ï–¢**

–°–º. [–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û–ï –†–£–ö–û–í–û–î–°–¢–í–û –ü–û TDD](technical_requirements/TDD_MANDATORY_GUIDE.md) –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

## ‚ö†Ô∏è –í–∞–∂–Ω–æ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ —Ç–µ–∫—É—â–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏

**–¢–µ—Å—Ç—ã –±—ã–ª–∏ –Ω–∞–ø–∏—Å–∞–Ω—ã, –Ω–æ –ù–ï –∑–∞–ø—É—Å–∫–∞–ª–∏—Å—å!** –≠—Ç–æ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω, –∫–æ—Ç–æ—Ä—ã–π –º—ã –∏—Å–ø—Ä–∞–≤–ª—è–µ–º. –î–∞–Ω–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–º–æ–∂–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã.

## –ù–æ–≤–æ–µ –ø—Ä–∞–≤–∏–ª–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

–° —ç—Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞:
1. **–°–Ω–∞—á–∞–ª–∞ —Ç–µ—Å—Ç** ‚Üí –∑–∞–ø—É—Å–∫ ‚Üí –æ—à–∏–±–∫–∞
2. **–ó–∞—Ç–µ–º –∫–æ–¥** ‚Üí –∑–∞–ø—É—Å–∫ ‚Üí —É—Å–ø–µ—Ö
3. **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥** ‚Üí –∑–∞–ø—É—Å–∫ ‚Üí —É—Å–ø–µ—Ö
4. **–¢–æ–ª—å–∫–æ –ø–æ—Ç–æ–º –∫–æ–º–º–∏—Ç**

## –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 1.1 –ó–∞–ø—É—Å—Ç–∏—Ç–µ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
```bash
make up
# –∏–ª–∏
docker-compose up -d
```

### 1.2 –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –ë–î
```bash
make test-setup
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç:
- `composer install` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö PHP –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö `lms_test`

### 1.3 –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ PHPUnit —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
```bash
docker-compose exec app ./vendor/bin/phpunit --version
```

–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:
```
PHPUnit 10.x.x by Sebastian Bergmann and contributors.
```

## –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Å—Ç–µ–π—à–µ–≥–æ —Ç–µ—Å—Ç–∞

### 2.1 –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
```bash
make test-simple
```

–ï—Å–ª–∏ —ç—Ç–æ—Ç —Ç–µ—Å—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç, –∑–Ω–∞—á–∏—Ç –±–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç.

## –®–∞–≥ 3: –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å

### 3.1 –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã namespaces

–ù–∞—à–∏ —Ç–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç namespace `Tests\`, –Ω–æ —Ñ–∞–π–ª—ã –º–æ–≥—É—Ç –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å PSR-4:

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫—É
docker-compose exec app composer dump-autoload
```

### 3.2 –°–æ–∑–¥–∞–π—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–±–æ—á–∏–π —Ç–µ—Å—Ç

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `tests/WorkingTest.php`:

```php
<?php

namespace Tests;

use PHPUnit\Framework\TestCase;

class WorkingTest extends TestCase
{
    public function testBasicAssertion(): void
    {
        $this->assertTrue(true);
    }
    
    public function testBasicMath(): void
    {
        $this->assertEquals(4, 2 + 2);
    }
}
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –µ–≥–æ:
```bash
docker-compose exec app ./vendor/bin/phpunit tests/WorkingTest.php
```

## –®–∞–≥ 4: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ—Å—Ç–æ–≤

### 4.1 –ü—Ä–æ–±–ª–µ–º—ã –≤ TestCase.php

–§–∞–π–ª `tests/TestCase.php` –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å Faker. –ò—Å–ø—Ä–∞–≤—å—Ç–µ:

```php
<?php

namespace Tests;

use PHPUnit\Framework\TestCase as BaseTestCase;
use Faker\Factory as Faker;

abstract class TestCase extends BaseTestCase
{
    protected $faker;
    
    protected function setUp(): void
    {
        parent::setUp();
        $this->faker = Faker::create();
    }
}
```

### 4.2 –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—É—Ç—è–º–∏ –∏ –∫–ª–∞—Å—Å–∞–º–∏

–ú–Ω–æ–≥–∏–µ —Ç–µ—Å—Ç—ã —Å—Å—ã–ª–∞—é—Ç—Å—è –Ω–∞ –∫–ª–∞—Å—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å:
- `App\User\Domain\User`
- `App\User\Domain\ValueObjects\Email`
- –∏ —Ç.–¥.

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —ç—Ç–∏ —Ñ–∞–π–ª—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç –∏ namespace –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π.

## –®–∞–≥ 5: –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

### 5.1 –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å unit —Ç–µ—Å—Ç—ã –ø–æ –æ–¥–Ω–æ–º—É

```bash
# EmailTest
docker-compose exec app ./vendor/bin/phpunit tests/Unit/User/Domain/ValueObjects/EmailTest.php

# –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—à–∏–±–∫–∏ –∏ –∏—Å–ø—Ä–∞–≤—å—Ç–µ
```

### 5.2 –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è

#### –û—à–∏–±–∫–∞: Class not found
```
Fatal error: Class 'App\User\Domain\ValueObjects\Email' not found
```
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ namespace –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

#### –û—à–∏–±–∫–∞: Call to undefined method
```
Error: Call to undefined method Tests\TestCase::faker()
```
**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø—Ä–∞–≤—å—Ç–µ TestCase.php –∫–∞–∫ –ø–æ–∫–∞–∑–∞–Ω–æ –≤—ã—à–µ

#### –û—à–∏–±–∫–∞: Cannot instantiate abstract class
```
Error: Cannot instantiate abstract class
```
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–µ—Å—Ç–æ–≤—ã–π –∫–ª–∞—Å—Å –Ω–µ abstract

## –®–∞–≥ 6: –û—Ç–ª–∞–¥–∫–∞ —Ç–µ—Å—Ç–æ–≤

### 6.1 –í–∫–ª—é—á–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
```bash
docker-compose exec app ./vendor/bin/phpunit --debug tests/Unit/User/Domain/ValueObjects/EmailTest.php
```

### 6.2 –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å –æ—Å—Ç–∞–Ω–æ–≤–∫–æ–π –Ω–∞ –ø–µ—Ä–≤–æ–π –æ—à–∏–±–∫–µ
```bash
docker-compose exec app ./vendor/bin/phpunit --stop-on-failure tests/Unit/
```

## –®–∞–≥ 7: –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π:
1. **–ù–∞—á–Ω–∏—Ç–µ —Å —Å–∞–º–æ–≥–æ –ø—Ä–æ—Å—Ç–æ–≥–æ —Ç–µ—Å—Ç–∞** (EmailTest –∏–ª–∏ PasswordTest)
2. **–ò—Å–ø—Ä–∞–≤—å—Ç–µ –æ—à–∏–±–∫–∏** –≤ —ç—Ç–æ–º —Ç–µ—Å—Ç–µ
3. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω –ø—Ä–æ—Ö–æ–¥–∏—Ç**
4. **–ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É**

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è EmailTest:

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç
docker-compose exec app ./vendor/bin/phpunit tests/Unit/User/Domain/ValueObjects/EmailTest.php

# 2. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ "Class Email not found", —Å–æ–∑–¥–∞–π—Ç–µ –∑–∞–≥–ª—É—à–∫—É:
mkdir -p src/User/Domain/ValueObjects
echo "<?php namespace App\User\Domain\ValueObjects; class Email { private \$value; public function __construct(string \$value) { \$this->value = \$value; } public function getValue(): string { return \$this->value; } }" > src/User/Domain/ValueObjects/Email.php

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç —Å–Ω–æ–≤–∞
docker-compose exec app ./vendor/bin/phpunit tests/Unit/User/Domain/ValueObjects/EmailTest.php
```

## –®–∞–≥ 8: –ö–æ–≥–¥–∞ –≤—Å–µ —Ç–µ—Å—Ç—ã –∑–∞—Ä–∞–±–æ—Ç–∞—é—Ç

### 8.1 –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Ç–µ—Å—Ç—ã
```bash
make test
```

### 8.2 –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–∫—Ä—ã—Ç–∏–µ
```bash
make test-coverage
```

### 8.3 –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
```bash
make test-unit        # –¢–æ–ª—å–∫–æ unit —Ç–µ—Å—Ç—ã
make test-integration # –¢–æ–ª—å–∫–æ integration —Ç–µ—Å—Ç—ã
make test-feature     # –¢–æ–ª—å–∫–æ feature —Ç–µ—Å—Ç—ã
```

## –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ù–ï –ø—ã—Ç–∞–π—Ç–µ—Å—å –∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã —Å—Ä–∞–∑—É** - —ç—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ —Ö–∞–æ—Å—É
2. **–§–æ–∫—É—Å–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ –æ–¥–Ω–æ–º —Ç–µ—Å—Ç–µ** –∑–∞ —Ä–∞–∑
3. **–ö–æ–º–º–∏—Ç—å—Ç–µ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞**
4. **–ï—Å–ª–∏ —Ç–µ—Å—Ç —Å–ª–∏—à–∫–æ–º —Å–ª–æ–∂–Ω—ã–π** - —É–ø—Ä–æ—Å—Ç–∏—Ç–µ –∏–ª–∏ –ø–µ—Ä–µ–ø–∏—à–∏—Ç–µ
5. **–ü–æ–º–Ω–∏—Ç–µ**: –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏–π —Ç–µ—Å—Ç —Ö—É–∂–µ, —á–µ–º –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–µ—Å—Ç–∞

## –û–∂–∏–¥–∞–µ–º—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–ú–Ω–æ–≥–∏–µ –∫–ª–∞—Å—Å—ã Domain –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç** - –Ω—É–∂–Ω–æ –∏—Ö —Å–æ–∑–¥–∞—Ç—å
2. **Mockery –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å** - –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ PHPUnit mocks
3. **Integration —Ç–µ—Å—Ç—ã —Ç—Ä–µ–±—É—é—Ç —Ä–µ–∞–ª—å–Ω—É—é –ë–î** - —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω–∞ —Å–æ–∑–¥–∞–Ω–∞
4. **Feature —Ç–µ—Å—Ç—ã —Ç—Ä–µ–±—É—é—Ç Slim** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ–Ω —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ —Ö–æ—Ç—è –±—ã –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–µ—Å—Ç–æ–≤ –∑–∞—Ä–∞–±–æ—Ç–∞—é—Ç:
1. –£–¥–∞–ª–∏—Ç–µ –Ω–µ—Ä–∞–±–æ—á–∏–µ —Ç–µ—Å—Ç—ã
2. –ü–µ—Ä–µ–ø–∏—à–∏—Ç–µ –∏—Ö —Å –Ω—É–ª—è, –∏—Å–ø–æ–ª—å–∑—É—è TDD
3. –ó–∞–ø—É—Å–∫–∞–π—Ç–µ —Ç–µ—Å—Ç—ã –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ CI/CD –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

## –í—ã–≤–æ–¥

–î–∞, —Ç–µ–∫—É—â–∏–µ —Ç–µ—Å—Ç—ã - —ç—Ç–æ "—Ñ–∞–Ω—Ç–∞–∑–∏—è", –∞ –Ω–µ —Ä–µ–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã. –ù–æ —ç—Ç–æ –∏—Å–ø—Ä–∞–≤–∏–º–æ. –ì–ª–∞–≤–Ω–æ–µ - –Ω–∞—á–∞—Ç—å —Å –º–∞–ª–æ–≥–æ –∏ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –¥–≤–∏–≥–∞—Ç—å—Å—è –≤–ø–µ—Ä–µ–¥. 