# –ü–ª–∞–Ω Sprint 6: Integration Layer

## üìã –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–ø—Ä–∏–Ω—Ç–µ
- **–ù–æ–º–µ—Ä —Å–ø—Ä–∏–Ω—Ç–∞**: 6
- **–ù–∞–∑–≤–∞–Ω–∏–µ**: Integration & Database Layer
- **–ü–ª–∞–Ω–∏—Ä—É–µ–º–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: 5-7 –¥–Ω–µ–π
- **–ü–ª–∞–Ω–∏—Ä—É–µ–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤**: ~150
- **–û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ —Ä–µ–∞–ª—å–Ω–∞—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å

## üéØ –¶–µ–ª–∏ —Å–ø—Ä–∏–Ω—Ç–∞

### 1. Database Repositories
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Doctrine —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:
- [ ] UserRepository
- [ ] RoleRepository
- [ ] CompetencyRepository
- [ ] PositionRepository
- [ ] CourseRepository
- [ ] EnrollmentRepository
- [ ] ProgressRepository
- [ ] CertificateRepository

### 2. Database Migrations
–°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü:
- [ ] –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã —Å—É—â–Ω–æ—Å—Ç–µ–π
- [ ] –°–≤—è–∑—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã (many-to-many)
- [ ] –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- [ ] –ù–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (seeders)

### 3. Event Bus
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É —Å–æ–±—ã—Ç–∏–π:
- [ ] EventBus –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- [ ] In-Memory implementation
- [ ] Symfony Messenger integration
- [ ] Domain event handlers

### 4. API Gateway
–°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—É—é —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞:
- [ ] Routing configuration
- [ ] Request/Response middleware
- [ ] Error handling
- [ ] CORS configuration

### 5. Integration Tests
–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã:
- [ ] Database transaction tests
- [ ] API endpoint tests
- [ ] Event propagation tests
- [ ] Cross-service scenarios

## üìä –ü–ª–∞–Ω–∏—Ä—É–µ–º–∞—è –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –ø–æ –¥–Ω—è–º

### –î–µ–Ω—å 1: Database Repositories (User & Auth)
- Doctrine configuration
- UserRepository implementation
- RoleRepository implementation
- PermissionRepository implementation
- –¢–µ—Å—Ç—ã: ~20

### –î–µ–Ω—å 2: Database Repositories (Competency & Position)
- CompetencyRepository implementation
- UserCompetencyRepository implementation
- PositionRepository implementation
- CareerPathRepository implementation
- –¢–µ—Å—Ç—ã: ~25

### –î–µ–Ω—å 3: Database Repositories (Learning)
- CourseRepository implementation
- EnrollmentRepository implementation
- ProgressRepository implementation
- CertificateRepository implementation
- –¢–µ—Å—Ç—ã: ~30

### –î–µ–Ω—å 4: Migrations & Seeders
- –°–æ–∑–¥–∞–Ω–∏–µ –≤—Å–µ—Ö –º–∏–≥—Ä–∞—Ü–∏–π
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤
- –°–æ–∑–¥–∞–Ω–∏–µ seeders –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –¢–µ—Å—Ç—ã –º–∏–≥—Ä–∞—Ü–∏–π
- –¢–µ—Å—Ç—ã: ~15

### –î–µ–Ω—å 5: Event Bus & Middleware
- EventBus implementation
- Event handlers –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- Middleware –¥–ª—è API
- –¢–µ—Å—Ç—ã: ~20

### –î–µ–Ω—å 6: API Gateway & Integration
- API Gateway configuration
- Cross-service integration
- Error handling
- –¢–µ—Å—Ç—ã: ~20

### –î–µ–Ω—å 7: Full Integration Tests
- End-to-end scenarios
- Performance tests
- Load tests
- –¢–µ—Å—Ç—ã: ~20

## üèóÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è

### Database
```yaml
ORM: Doctrine 2
–ë–∞–∑–∞_–¥–∞–Ω–Ω—ã—Ö: PostgreSQL
–ú–∏–≥—Ä–∞—Ü–∏–∏: Doctrine Migrations
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: SQLite in-memory –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏
```

### Event System
```yaml
–®–∏–Ω–∞_—Å–æ–±—ã—Ç–∏–π: Symfony Messenger
–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç: In-memory –¥–ª—è —Ç–µ—Å—Ç–æ–≤, AMQP –¥–ª—è production
–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è: JSON
Retry_strategy: Exponential backoff
```

### API Gateway
```yaml
Framework: Symfony 6
Routing: –ê—Ç—Ä–∏–±—É—Ç—ã PHP 8
–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: OpenAPI 3.0
–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è: JWT tokens
```

## üìà –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ:
- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (100%)
- [ ] –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ > 80%
- [ ] –í—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∏ –æ—Ç–∫–∞—Ç—ã–≤–∞—é—Ç—Å—è
- [ ] API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∞

### –ñ–µ–ª–∞—Ç–µ–ª—å–Ω—ã–µ:
- [ ] –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å API < 100ms
- [ ] –ù–µ—Ç N+1 –∑–∞–ø—Ä–æ—Å–æ–≤
- [ ] –°–æ–±—ã—Ç–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
- [ ] Graceful degradation –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤

## ‚ö†Ô∏è –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

### –†–∏—Å–∫ 1: –°–ª–æ–∂–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è**: –ù–∞—á–∞—Ç—å —Å –ø—Ä–æ—Å—Ç—ã—Ö —Å–ª—É—á–∞–µ–≤, –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —É—Å–ª–æ–∂–Ω—è—Ç—å

### –†–∏—Å–∫ 2: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ë–î
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è**: –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤

### –†–∏—Å–∫ 3: –¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è**: –°—Ç—Ä–æ–≥–æ–µ —Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ DDD boundaries

## üìã Definition of Done

–î–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏:
- [ ] –ö–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω —á–µ—Ä–µ–∑ TDD
- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [ ] –ö–æ–¥ review –ø—Ä–æ–π–¥–µ–Ω
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å–æ–∑–¥–∞–Ω—ã

–î–ª—è —Å–ø—Ä–∏–Ω—Ç–∞:
- [ ] –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã
- [ ] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –°–æ–±—ã—Ç–∏—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—é—Ç—Å—è
- [ ] API –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω
- [ ] –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–µ–º–ª–µ–º–∞—è

## üéØ –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ö –∫–æ–Ω—Ü—É —Å–ø—Ä–∏–Ω—Ç–∞:
1. **–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–µ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** —Å —Ä–µ–∞–ª—å–Ω–æ–π –ë–î
2. **Event-driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** –¥–ª—è —Å–ª–∞–±–æ–π —Å–≤—è–∑–Ω–æ—Å—Ç–∏
3. **API Gateway** –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
4. **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production** (–∫—Ä–æ–º–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è)

---

**–°—Ç–∞—Ä—Ç —Å–ø—Ä–∏–Ω—Ç–∞**: –ü–æ—Å–ª–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–ª–∞–Ω–∞  
**–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è**: TDD, –ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –°–Ω–∞—á–∞–ª–∞ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã (User, Auth) 